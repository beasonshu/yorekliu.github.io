<!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="An Android Developer."><link href=https://blog.yorek.xyz/about-me/android/3rd-library/glide1/ rel=canonical><meta name=author content="Yorek Liu"><meta name=lang:clipboard.copy content=复制><meta name=lang:clipboard.copied content=已复制><meta name=lang:search.language content=ja><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content=没有找到符合条件的结果><meta name=lang:search.result.one content="找到 1 个符合条件的结果"><meta name=lang:search.result.other content="# 个符合条件的结果"><meta name=lang:search.tokenizer content=[\uff0c\u3002]+><link rel="shortcut icon" href=../../../assets/images/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.6.0"><title>Glide v4 源码解析（一）</title><link rel=stylesheet href=../../../assets/stylesheets/application.1b62728e.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content><script src=../../../assets/javascripts/modernizr.268332fc.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css><link rel=manifest href=../../../manifest.webmanifest><script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-155096376-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script><script async src=https://www.google-analytics.com/analytics.js></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Yorek's - Glide v4 源码解析（一）"><meta property=og:description content="An Android Developer."><meta content=https://blog.yorek.xyz/about-me/android/3rd-library/glide1/ property=og:url><meta property=og:image content=https://blog.yorek.xyz/about-meassets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><!-- Twitter meta tags --><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@squidfunk><meta name=twitter:creator content=@squidfunk><meta name=twitter:title content="Yorek's - Glide v4 源码解析（一）"><meta name=twitter:description content="An Android Developer."><meta name=twitter:image content=https://blog.yorek.xyz/about-meassets/images/banner.png></head> <body dir=ltr data-md-color-primary=white data-md-color-accent=blue> <svg class=md-svg> <defs> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#1 tabindex=1 class=md-skip> 跳转至 </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://blog.yorek.xyz/about-me title="Yorek's" class="md-header-nav__button md-logo"> <img src=../../../assets/images/favicon.ico width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Yorek's </span> <span class=md-header-nav__topic> Glide v4 源码解析（一） </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> 键入以开始搜索 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../3rd-library-source-code/ class="md-tabs__link md-tabs__link--active"> Android </a> </li> <li class=md-tabs__item> <a href=../../../flutter/flutter_first_project_1/ class=md-tabs__link> Flutter </a> </li> <li class=md-tabs__item> <a href=../../../leetcode/ class=md-tabs__link> LeetCode </a> </li> <li class=md-tabs__item> <a href=../../../design-pattern/design-pattern/ class=md-tabs__link> Books </a> </li> </ul> </div> </nav> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://blog.yorek.xyz/about-me title="Yorek's" class="md-nav__button md-logo"> <img src=../../../assets/images/favicon.ico width=48 height=48> </a> Yorek's </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Android </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Android </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-1 type=checkbox id=nav-2-1 checked> <label class=md-nav__link for=nav-2-1> 三方库源码解析 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-1> 三方库源码解析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../3rd-library-source-code/ title=Android三方库源码分析 class=md-nav__link> Android三方库源码分析 </a> </li> <li class=md-nav__item> <a href=../matrix/ title="微信APM Matrix解析" class=md-nav__link> 微信APM Matrix解析 </a> </li> <li class=md-nav__item> <a href=../matrix-trace/ title=Matrix-TraceCanary解析 class=md-nav__link> Matrix-TraceCanary解析 </a> </li> <li class=md-nav__item> <a href=../matrix-io/ title=Matrix-IOCanary解析 class=md-nav__link> Matrix-IOCanary解析 </a> </li> <li class=md-nav__item> <a href=../matrix-resource/ title=Matrix-ResourceCanary解析 class=md-nav__link> Matrix-ResourceCanary解析 </a> </li> <li class=md-nav__item> <a href=../matrix-sqlitelint/ title=Matrix-SQLiteLint解析 class=md-nav__link> Matrix-SQLiteLint解析 </a> </li> <li class=md-nav__item> <a href=../okhttp/ title=OkHttp3源码解析 class=md-nav__link> OkHttp3源码解析 </a> </li> <li class=md-nav__item> <a href=../retrofit/ title=Retrofit2源码解析 class=md-nav__link> Retrofit2源码解析 </a> </li> <li class=md-nav__item> <a href=../rxjava&rxandroid/ title=RxJava源码解析及使用实例 class=md-nav__link> RxJava源码解析及使用实例 </a> </li> <li class=md-nav__item> <a href=../../other/RxJava/ title=RxJava操作符大全 class=md-nav__link> RxJava操作符大全 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Glide v4 源码解析（一） </label> <a href=./ title="Glide v4 源码解析（一）" class="md-nav__link md-nav__link--active"> Glide v4 源码解析（一） </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1. 准备 </a> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> 2. 简单使用 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> 2.1 占位符 </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> 2.2 指定图片格式 </a> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> 2.3 指定图片大小 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#__comments class="md-nav__link md-nav__link--active"> 评论 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../glide2/ title="Glide v4 源码解析（二）" class=md-nav__link> Glide v4 源码解析（二） </a> </li> <li class=md-nav__item> <a href=../glide3/ title="Glide v4 源码解析（三）" class=md-nav__link> Glide v4 源码解析（三） </a> </li> <li class=md-nav__item> <a href=../glide4/ title="Glide v4 源码解析（四）" class=md-nav__link> Glide v4 源码解析（四） </a> </li> <li class=md-nav__item> <a href=../glide5/ title="Glide v4 源码解析（五）" class=md-nav__link> Glide v4 源码解析（五） </a> </li> <li class=md-nav__item> <a href=../glide6/ title="Glide v4 源码解析（六）" class=md-nav__link> Glide v4 源码解析（六） </a> </li> <li class=md-nav__item> <a href=../glide7/ title="Glide v4 源码解析（七）" class=md-nav__link> Glide v4 源码解析（七） </a> </li> <li class=md-nav__item> <a href=../migrate-to-glide/ title=杂记：从Picasso迁移至Glide class=md-nav__link> 杂记：从Picasso迁移至Glide </a> </li> <li class=md-nav__item> <a href=../eventbus/ title=EventBus源码解析 class=md-nav__link> EventBus源码解析 </a> </li> <li class=md-nav__item> <a href=../leakcanary/ title=LeakCanary2源码解析 class=md-nav__link> LeakCanary2源码解析 </a> </li> <li class=md-nav__item> <a href=../permissiondispatcher/ title=PermissionDispatcher源码解析 class=md-nav__link> PermissionDispatcher源码解析 </a> </li> <li class=md-nav__item> <a href=../../other/constraintlayout/ title=ConstraintLayout使用大全 class=md-nav__link> ConstraintLayout使用大全 </a> </li> <li class=md-nav__item> <a href=../../other/dagger2/ title=初学者的Dagger2教程 class=md-nav__link> 初学者的Dagger2教程 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> Android开发高手课 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-2> Android开发高手课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../paid/master/ title=Android开发高手课 class=md-nav__link> Android开发高手课 </a> </li> <li class=md-nav__item> <a href=../../paid/master/crash_1/ title="01 | 崩溃优化（上）：关于“崩溃”那些事儿" class=md-nav__link> 01 | 崩溃优化（上）：关于“崩溃”那些事儿 </a> </li> <li class=md-nav__item> <a href=../../paid/master/crash_2/ title="02 | 崩溃优化（下）：应用崩溃了，你应该如何去分析？" class=md-nav__link> 02 | 崩溃优化（下）：应用崩溃了，你应该如何去分析？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/memory_1/ title="03 | 内存优化（上）：4GB内存时代，再谈内存优化" class=md-nav__link> 03 | 内存优化（上）：4GB内存时代，再谈内存优化 </a> </li> <li class=md-nav__item> <a href=../../paid/master/memory_2/ title="04 | 内存优化（下）：内存优化这件事，应该从哪里着手？" class=md-nav__link> 04 | 内存优化（下）：内存优化这件事，应该从哪里着手？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/stuck_1/ title="05 | 卡顿优化（上）：你要掌握的卡顿分析方法" class=md-nav__link> 05 | 卡顿优化（上）：你要掌握的卡顿分析方法 </a> </li> <li class=md-nav__item> <a href=../../paid/master/stuck_2/ title="06 | 卡顿优化（下）：如何监控应用卡顿？" class=md-nav__link> 06 | 卡顿优化（下）：如何监控应用卡顿？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/stuck_3/ title="06补充篇 | 卡顿优化：卡顿现场与卡顿分析" class=md-nav__link> 06补充篇 | 卡顿优化：卡顿现场与卡顿分析 </a> </li> <li class=md-nav__item> <a href=../../paid/master/start_1/ title="07 | 启动优化（上）：从启动过程看启动速度优化" class=md-nav__link> 07 | 启动优化（上）：从启动过程看启动速度优化 </a> </li> <li class=md-nav__item> <a href=../../paid/master/start_2/ title="08 | 启动优化（下）：优化启动速度的进阶方法" class=md-nav__link> 08 | 启动优化（下）：优化启动速度的进阶方法 </a> </li> <li class=md-nav__item> <a href=../../paid/master/io_1/ title="09 | I/O优化（上）：开发工程师必备的I/O优化知识" class=md-nav__link> 09 | I/O优化（上）：开发工程师必备的I/O优化知识 </a> </li> <li class=md-nav__item> <a href=../../paid/master/io_2/ title="10 | I/O优化（中）：不同I/O方式的使用场景是什么？" class=md-nav__link> 10 | I/O优化（中）：不同I/O方式的使用场景是什么？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/io_3/ title="11 | I/O优化（下）：如何监控线上I/O操作？" class=md-nav__link> 11 | I/O优化（下）：如何监控线上I/O操作？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/storage_1/ title="12 | 存储优化（上）：常见的数据存储方法有哪些？" class=md-nav__link> 12 | 存储优化（上）：常见的数据存储方法有哪些？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/storage_2/ title="13 | 存储优化（中）：如何优化数据存储？" class=md-nav__link> 13 | 存储优化（中）：如何优化数据存储？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/storage_3/ title="14 | 存储优化（下）：数据库SQLite的使用和优化" class=md-nav__link> 14 | 存储优化（下）：数据库SQLite的使用和优化 </a> </li> <li class=md-nav__item> <a href=../../paid/master/network_1/ title="15 | 网络优化（上）：移动开发工程师必备的网络优化知识" class=md-nav__link> 15 | 网络优化（上）：移动开发工程师必备的网络优化知识 </a> </li> <li class=md-nav__item> <a href=../../paid/master/network_2/ title="16 | 网络优化（中）：复杂多变的移动网络该如何优化？" class=md-nav__link> 16 | 网络优化（中）：复杂多变的移动网络该如何优化？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/network_3/ title="17 | 网络优化（下）：大数据下网络该如何监控？" class=md-nav__link> 17 | 网络优化（下）：大数据下网络该如何监控？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/battery_1/ title="18 | 耗电优化（上）：从电量优化的演进看耗电分析" class=md-nav__link> 18 | 耗电优化（上）：从电量优化的演进看耗电分析 </a> </li> <li class=md-nav__item> <a href=../../paid/master/battery_2/ title="19 | 耗电优化（下）：耗电的优化方法与线上监控" class=md-nav__link> 19 | 耗电优化（下）：耗电的优化方法与线上监控 </a> </li> <li class=md-nav__item> <a href=../../paid/master/ui_1/ title="20 | UI 优化（上）：UI 渲染的几个关键概念" class=md-nav__link> 20 | UI 优化（上）：UI 渲染的几个关键概念 </a> </li> <li class=md-nav__item> <a href=../../paid/master/ui_2/ title="21 | UI 优化（下）：如何优化 UI 渲染？" class=md-nav__link> 21 | UI 优化（下）：如何优化 UI 渲染？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/package_1/ title="22 | 包体积优化（上）：如何减少安装包大小？" class=md-nav__link> 22 | 包体积优化（上）：如何减少安装包大小？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/package_2/ title="23 | 包体积优化（下）：资源优化的进阶实践" class=md-nav__link> 23 | 包体积优化（下）：资源优化的进阶实践 </a> </li> <li class=md-nav__item> <a href=../../paid/master/compile/ title="26 | 关于编译，你需要了解什么？" class=md-nav__link> 26 | 关于编译，你需要了解什么？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/bytecode/ title="27 | 编译插桩的三种方法：AspectJ、ASM、ReDex" class=md-nav__link> 27 | 编译插桩的三种方法：AspectJ、ASM、ReDex </a> </li> <li class=md-nav__item> <a href=../../paid/master/native_hook/ title="35 | Native Hook 技术，天使还是魔鬼？" class=md-nav__link> 35 | Native Hook 技术，天使还是魔鬼？ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-3 type=checkbox id=nav-2-3> <label class=md-nav__link for=nav-2-3> Framework系列 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-3> Framework系列 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../framework/Android四大组件(1)/ title=Activity class=md-nav__link> Activity </a> </li> <li class=md-nav__item> <a href=../../framework/Android四大组件(2)/ title=Service class=md-nav__link> Service </a> </li> <li class=md-nav__item> <a href=../../framework/Android四大组件(3)/ title=Broadcasts class=md-nav__link> Broadcasts </a> </li> <li class=md-nav__item> <a href=../../framework/Android四大组件(4)/ title="Content Providers与Fragment" class=md-nav__link> Content Providers与Fragment </a> </li> <li class=md-nav__item> <a href=../../framework/IPC机制/ title=IPC机制 class=md-nav__link> IPC机制 </a> </li> <li class=md-nav__item> <a href=../../framework/View的事件体系/ title=View的事件体系 class=md-nav__link> View的事件体系 </a> </li> <li class=md-nav__item> <a href=../../framework/View的绘制原理/ title=View的绘制原理 class=md-nav__link> View的绘制原理 </a> </li> <li class=md-nav__item> <a href=../../framework/RemoteViews/ title=RemoteViews class=md-nav__link> RemoteViews </a> </li> <li class=md-nav__item> <a href=../../framework/Drawable/ title=Android中的Drawable资源 class=md-nav__link> Android中的Drawable资源 </a> </li> <li class=md-nav__item> <a href=../../framework/Android动画/ title=Android动画 class=md-nav__link> Android动画 </a> </li> <li class=md-nav__item> <a href=../../framework/Window与WindowManager/ title=Window与WindowManager class=md-nav__link> Window与WindowManager </a> </li> <li class=md-nav__item> <a href=../../framework/四大组件启动过程/ title=四大组件启动过程 class=md-nav__link> 四大组件启动过程 </a> </li> <li class=md-nav__item> <a href=../../framework/Android消息机制/ title=Android消息机制 class=md-nav__link> Android消息机制 </a> </li> <li class=md-nav__item> <a href=../../framework/Android线程与线程池/ title=Android线程与线程池 class=md-nav__link> Android线程与线程池 </a> </li> <li class=md-nav__item> <a href=../../framework/Bitmap的缓存与加载/ title=Bitmap的缓存与加载 class=md-nav__link> Bitmap的缓存与加载 </a> </li> <li class=md-nav__item> <a href=../../framework/JNI与NDK/ title=JNI与NDK编程简介 class=md-nav__link> JNI与NDK编程简介 </a> </li> <li class=md-nav__item> <a href=../../framework/性能优化/ title=Android性能优化 class=md-nav__link> Android性能优化 </a> </li> <li class=md-nav__item> <a href=../../framework/binder1-mediaservice/ title=Binder深入理解——以MediaService为例 class=md-nav__link> Binder深入理解——以MediaService为例 </a> </li> <li class=md-nav__item> <a href=../../framework/binder2/ title=Binder深入理解——罗老师系列 class=md-nav__link> Binder深入理解——罗老师系列 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-4 type=checkbox id=nav-2-4> <label class=md-nav__link for=nav-2-4> 付费知识归档 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-4> 付费知识归档 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-4-1 type=checkbox id=nav-2-4-1> <label class=md-nav__link for=nav-2-4-1> 某圈问题索引 </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-2-4-1> 某圈问题索引 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../paid/zsxq/zsxq_index/ title=某圈问题索引 class=md-nav__link> 某圈问题索引 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week1-synchronized/ title=理解Java中synchronized关键词 class=md-nav__link> 理解Java中synchronized关键词 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week2-service/ title=理解Service class=md-nav__link> 理解Service </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week3-activity/ title=理解Activity的启动模式 class=md-nav__link> 理解Activity的启动模式 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week4-startActivityForResult/ title=关于startActivityForResult class=md-nav__link> 关于startActivityForResult </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week5-view/ title=关于View的知识 class=md-nav__link> 关于View的知识 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week6-gradle/ title=关于Gradle的知识 class=md-nav__link> 关于Gradle的知识 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week7-serialization/ title=关于序列化的知识 class=md-nav__link> 关于序列化的知识 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week10-classloader/ title=Android中的ClassLoader class=md-nav__link> Android中的ClassLoader </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week11-binder/ title=Binder简介 class=md-nav__link> Binder简介 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week12-retrofit-okhttp/ title=OkHttp和Retrofit的作用以及两者之间的联系 class=md-nav__link> OkHttp和Retrofit的作用以及两者之间的联系 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week14-jvm-gc/ title=JVM中垃圾回收策略 class=md-nav__link> JVM中垃圾回收策略 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week16-keep-app-alive/ title=进程保活 class=md-nav__link> 进程保活 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week17-android-components/ title=四大组件的作用以及多进程 class=md-nav__link> 四大组件的作用以及多进程 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week20-network-protocol/ title=网络协议 class=md-nav__link> 网络协议 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week21-mvc&amp;mvp&mvvm/ title=MVC、MVP和MVVM class=md-nav__link> MVC、MVP和MVVM </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week22-android-studio-build/ title="Android Studio build过程" class=md-nav__link> Android Studio build过程 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week23-load-large-bitmap/ title=大尺寸图片加载问题 class=md-nav__link> 大尺寸图片加载问题 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-5 type=checkbox id=nav-2-5> <label class=md-nav__link for=nav-2-5> 日常记录 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-5> 日常记录 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../other/annotation/ title=注解的定义及解析 class=md-nav__link> 注解的定义及解析 </a> </li> <li class=md-nav__item> <a href=../../other/best_throttle_in_mvvm/ title=这可能是MVVM中最优雅的按键防抖方案 class=md-nav__link> 这可能是MVVM中最优雅的按键防抖方案 </a> </li> <li class=md-nav__item> <a href=../../other/android-jenkins/ title="Jenkins for android" class=md-nav__link> Jenkins for android </a> </li> <li class=md-nav__item> <a href=../../other/SystemProrities/ title=普通Android程序使用SystemProrities class=md-nav__link> 普通Android程序使用SystemProrities </a> </li> <li class=md-nav__item> <a href=../../other/recyclerview-cache/ title=ListView、RecyclerView缓存策略解析 class=md-nav__link> ListView、RecyclerView缓存策略解析 </a> </li> <li class=md-nav__item> <a href=../../other/recyclerview-item-docoration/ title=RecyclerView高级特性——ItemDecoration class=md-nav__link> RecyclerView高级特性——ItemDecoration </a> </li> <li class=md-nav__item> <a href=../../other/recyclerview-others/ title=RecyclerView的一些使用细节 class=md-nav__link> RecyclerView的一些使用细节 </a> </li> <li class=md-nav__item> <a href=../../other/RecyclerView-Sort&Delete/ title=RecyclerView高级特性——拖拽排序以及滑动删除 class=md-nav__link> RecyclerView高级特性——拖拽排序以及滑动删除 </a> </li> <li class=md-nav__item> <a href=../../other/FAB-Behavior/ title=FloatingActionButton上滑隐藏下滑显示 class=md-nav__link> FloatingActionButton上滑隐藏下滑显示 </a> </li> <li class=md-nav__item> <a href=../../other/nestedscrolling/ title=NestedScrolling机制 class=md-nav__link> NestedScrolling机制 </a> </li> <li class=md-nav__item> <a href=../../other/porterduff/ title=使用Porter-Duff合成数字图像 class=md-nav__link> 使用Porter-Duff合成数字图像 </a> </li> <li class=md-nav__item> <a href=../../other/runtime/ title="Android Runtime" class=md-nav__link> Android Runtime </a> </li> <li class=md-nav__item> <a href=../../other/android_alias/ title=Android马甲包的那些事儿 class=md-nav__link> Android马甲包的那些事儿 </a> </li> <li class=md-nav__item> <a href=../../other/Android-Development-Tool/ title=Android神兵利器 class=md-nav__link> Android神兵利器 </a> </li> <li class=md-nav__item> <a href=../../other/FileProvider/ title=FileProvider class=md-nav__link> FileProvider </a> </li> <li class=md-nav__item> <a href=../../other/Android判断导航栏高度/ title=Android判断虚拟按键(导航栏)显示与否、高度以及获取屏幕实际高度 class=md-nav__link> Android判断虚拟按键(导航栏)显示与否、高度以及获取屏幕实际高度 </a> </li> <li class=md-nav__item> <a href=../../other/Android图片选择器/ title=Android图片选择器 class=md-nav__link> Android图片选择器 </a> </li> <li class=md-nav__item> <a href=../../other/Android底部导航栏框架/ title=Android原生底部导航栏 class=md-nav__link> Android原生底部导航栏 </a> </li> <li class=md-nav__item> <a href=../../other/Android搜索栏的实现/ title=Android搜索栏的实现 class=md-nav__link> Android搜索栏的实现 </a> </li> <li class=md-nav__item> <a href=../../other/Android暂停音乐播放器的播放/ title=Android暂停酷狗、网易云音乐等音乐播放器的播放 class=md-nav__link> Android暂停酷狗、网易云音乐等音乐播放器的播放 </a> </li> <li class=md-nav__item> <a href=../../other/Android滑动返回实践/ title=Android滑动返回实践 class=md-nav__link> Android滑动返回实践 </a> </li> <li class=md-nav__item> <a href=../../other/Android程序反编译/ title=MacOS下Android程序反编译 class=md-nav__link> MacOS下Android程序反编译 </a> </li> <li class=md-nav__item> <a href=../../other/Android通讯录快速读取/ title=Android通讯录快速读取 class=md-nav__link> Android通讯录快速读取 </a> </li> <li class=md-nav__item> <a href=../../other/soft-keyboard-in-app/ title=App内自定义软键盘 class=md-nav__link> App内自定义软键盘 </a> </li> <li class=md-nav__item> <a href=../../other/腾讯X5内核入坑指南/ title="腾讯TBS X5浏览器内核入坑指南" class=md-nav__link> 腾讯TBS X5浏览器内核入坑指南 </a> </li> <li class=md-nav__item> <a href=../../other/琐碎知识点/ title=琐碎知识点 class=md-nav__link> 琐碎知识点 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Flutter </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Flutter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_1/ title=年轻人的第一个Flutter程序(1) class=md-nav__link> 年轻人的第一个Flutter程序(1) </a> </li> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_2/ title=年轻人的第一个Flutter程序(2) class=md-nav__link> 年轻人的第一个Flutter程序(2) </a> </li> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_3/ title=年轻人的第一个Flutter程序(3) class=md-nav__link> 年轻人的第一个Flutter程序(3) </a> </li> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_4/ title=年轻人的第一个Flutter程序(4) class=md-nav__link> 年轻人的第一个Flutter程序(4) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> LeetCode </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> LeetCode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leetcode/ title=算法目录 class=md-nav__link> 算法目录 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_1/ title=数据结构、算法和数据操作 class=md-nav__link> 数据结构、算法和数据操作 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_3/ title=高质量的代码 class=md-nav__link> 高质量的代码 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_4/ title=解决问题的思路 class=md-nav__link> 解决问题的思路 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_5/ title=优化时间和空间效率 class=md-nav__link> 优化时间和空间效率 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_6/ title=面试中的各项能力 class=md-nav__link> 面试中的各项能力 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/array/ title=Array class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode1-10/ title=LeetCode(1-10) class=md-nav__link> LeetCode(1-10) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode11-20/ title=LeetCode(11-20) class=md-nav__link> LeetCode(11-20) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode21-30/ title=LeetCode(21-30) class=md-nav__link> LeetCode(21-30) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode31-40/ title=LeetCode(31-40) class=md-nav__link> LeetCode(31-40) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode41-50/ title=LeetCode(41-50) class=md-nav__link> LeetCode(41-50) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode51-60/ title=LeetCode(51-60) class=md-nav__link> LeetCode(51-60) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode61-70/ title=LeetCode(61-70) class=md-nav__link> LeetCode(61-70) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode71-80/ title=LeetCode(71-80) class=md-nav__link> LeetCode(71-80) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode81-90/ title=LeetCode(81-90) class=md-nav__link> LeetCode(81-90) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode91-100/ title=LeetCode(91-100) class=md-nav__link> LeetCode(91-100) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode101-110/ title=LeetCode(101-110) class=md-nav__link> LeetCode(101-110) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode111-120/ title=LeetCode(111-120) class=md-nav__link> LeetCode(111-120) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Books </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-1 type=checkbox id=nav-5-1> <label class=md-nav__link for=nav-5-1> Design Pattern </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-1> Design Pattern </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../design-pattern/design-pattern/ title=设计模式概述 class=md-nav__link> 设计模式概述 </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/design-principle/ title=面向对象的六大原则 class=md-nav__link> 面向对象的六大原则 </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/singleton/ title=单例模式(Singleton) class=md-nav__link> 单例模式(Singleton) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/builder/ title=建造者模式(Builder) class=md-nav__link> 建造者模式(Builder) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/prototype/ title=原型模式(Prototype) class=md-nav__link> 原型模式(Prototype) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/factory-method/ title="工厂方法模式(Factory method)" class=md-nav__link> 工厂方法模式(Factory method) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/abstract-factory/ title="抽象工厂模式(Abstract factory)" class=md-nav__link> 抽象工厂模式(Abstract factory) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/proxy/ title=代理模式(Proxy) class=md-nav__link> 代理模式(Proxy) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/composite/ title=组合模式(Composite) class=md-nav__link> 组合模式(Composite) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/adapter/ title=适配器模式(Adapter) class=md-nav__link> 适配器模式(Adapter) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/decorator/ title=装饰模式(Decorator) class=md-nav__link> 装饰模式(Decorator) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/flyweight/ title=享元模式(Flyweight) class=md-nav__link> 享元模式(Flyweight) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/facade/ title=外观模式(Facade) class=md-nav__link> 外观模式(Facade) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/bridge/ title=桥接模式(Bridge) class=md-nav__link> 桥接模式(Bridge) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/strategy/ title=策略模式(Strategy) class=md-nav__link> 策略模式(Strategy) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/state/ title=状态模式(State) class=md-nav__link> 状态模式(State) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/chain-of-responsibility/ title="责任链模式(Chain of responsibility)" class=md-nav__link> 责任链模式(Chain of responsibility) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/interpreter/ title=解释器模式(Interpreter) class=md-nav__link> 解释器模式(Interpreter) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/command/ title=命令模式(Command) class=md-nav__link> 命令模式(Command) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/observer/ title=观察者模式(Observer) class=md-nav__link> 观察者模式(Observer) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/memento/ title=备忘录模式(Memento) class=md-nav__link> 备忘录模式(Memento) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/iterator/ title=迭代器模式(Iterator) class=md-nav__link> 迭代器模式(Iterator) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/template-method/ title="模版方法模式(Template method)" class=md-nav__link> 模版方法模式(Template method) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/visitor/ title=访问者模式(Visitor) class=md-nav__link> 访问者模式(Visitor) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/mediator/ title=中介者模式(Mediator) class=md-nav__link> 中介者模式(Mediator) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/confusing-design-pattern/ title=易混淆的设计模式 class=md-nav__link> 易混淆的设计模式 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Effective Java </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-2> Effective Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../effective-java/effective-java/ title="Effective Java概述" class=md-nav__link> Effective Java概述 </a> </li> <li class=md-nav__item> <a href=../../../effective-java/chapter1/ title=创建和销毁对象 class=md-nav__link> 创建和销毁对象 </a> </li> <li class=md-nav__item> <a href=../../../effective-java/chapter2/ title=对于所有对象都通用的方法 class=md-nav__link> 对于所有对象都通用的方法 </a> </li> <li class=md-nav__item> <a href=../../../effective-java/chapter3/ title=类和接口 class=md-nav__link> 类和接口 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> JVM </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-3> JVM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jvm/jvm-content/ title=深入理解Java虚拟机 class=md-nav__link> 深入理解Java虚拟机 </a> </li> <li class=md-nav__item> <a href=../../../jvm/java-memory-area-oom/ title=Java内存区域与内存溢出异常 class=md-nav__link> Java内存区域与内存溢出异常 </a> </li> <li class=md-nav__item> <a href=../../../jvm/java-gc/ title=垃圾收集器与内存分配策略 class=md-nav__link> 垃圾收集器与内存分配策略 </a> </li> <li class=md-nav__item> <a href=../../../jvm/class-struct/ title=类文件结构 class=md-nav__link> 类文件结构 </a> </li> <li class=md-nav__item> <a href=../../../jvm/load-class/ title=虚拟机类加载机制 class=md-nav__link> 虚拟机类加载机制 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-4 type=checkbox id=nav-5-4> <label class=md-nav__link for=nav-5-4> Java </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-4> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../java/generics-java-kotlin/ title=Java&Kotlin在泛型方面的区别 class=md-nav__link> Java&Kotlin在泛型方面的区别 </a> </li> <li class=md-nav__item> <a href=../../../java/java-collections/ title=Java集合总结 class=md-nav__link> Java集合总结 </a> </li> <li class=md-nav__item> <a href=../../../java/java-foundation/ title=Java常见概念 class=md-nav__link> Java常见概念 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-5 type=checkbox id=nav-5-5> <label class=md-nav__link for=nav-5-5> Refactoring </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-5> Refactoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../refactoring/refactoring/ title=重构：改善既有代码的设计 class=md-nav__link> 重构：改善既有代码的设计 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1. 准备 </a> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> 2. 简单使用 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> 2.1 占位符 </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> 2.2 指定图片格式 </a> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> 2.3 指定图片大小 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#__comments class="md-nav__link md-nav__link--active"> 评论 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Glide v4 源码解析（一）</h1> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>本系列文章参考3.7.0版本的<a href=https://blog.csdn.net/sinyu890807/column/info/15318>guolin - Glide最全解析</a>，并按此思路结合4.9.0版本源码以及使用文档进行更新。<br> ➟ <a href=https://github.com/bumptech/glide/tree/v4.9.0>Glide v4.9.0</a><br> ➟ <a href=https://muyangmin.github.io/glide-docs-cn/ >中文文档</a><br> ➟ <a href=https://bumptech.github.io/glide/ >英文文档</a>🚀🚀 </p> </div> <div class="admonition note"> <p class=admonition-title>Glide系列文章目录</p> <ul> <li><a href=/android/3rd-library/glide1/ >Glide1——Glide v4 的基本使用</a></li> <li><a href=/android/3rd-library/glide2/ >Glide2——从源码的角度理解Glide三步的执行流程</a></li> <li><a href=/android/3rd-library/glide3/ >Glide3——深入探究Glide缓存机制</a></li> <li><a href=/android/3rd-library/glide4/ >Glide4——RequestBuilder中高级点的API以及Target</a></li> <li><a href=/android/3rd-library/glide5/ >Glide5——Glide内置的transform以及自定义BitmapTransformation</a></li> <li><a href=/android/3rd-library/glide6/ >Glide6——Glide利用AppGlideModule、LibraryGlideModule更改默认配置、扩展Glide功能；GlideApp与Glide的区别在哪？</a></li> <li><a href=/android/3rd-library/glide7/ >Glide7——利用OkHttp、自定义Drawable、自定义ViewTarget实现带进度的图片加载功能</a></li> <li><a href=/android/3rd-library/migrate-to-glide/ >杂记：从Picasso迁移至Glide</a></li> </ul> </div> <hr> <p>本章的主要内容为Glide v4的基本使用。</p> <h2 id=1>1. 准备<a class=headerlink href=#1 title="Permanent link">&para;</a></h2> <blockquote> <p>From: <a href=https://muyangmin.github.io/glide-docs-cn/doc/download-setup.html>下载和设置</a> </p> <p><strong>Min Sdk Version</strong> - 使用Glide需要minimum SDK版本API <strong>14</strong> (Ice Cream Sandwich) 或更高。<br> <strong>Compile Sdk Version</strong> - Glide必须使用API <strong>27</strong> (Oreo MR1) 或更高版本的SDK来编译。<br> <strong>Support Library Version</strong> - Glide使用的支持库版本为**27**。 </p> <p>如果你需要使用不同的支持库版本，你需要在你的<code>build.gradle</code>文件里从 Glide 的依赖中去除<code>com.android.support</code>。例如，假如你想使用 v26 的支持库：<br> dependencies {<br> &nbsp;&nbsp;&nbsp;&nbsp;implementation ("com.github.bumptech.glide:glide:4.8.0") {<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exclude group: "com.android.support"<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;&nbsp;&nbsp;implementation "com.android.support:support-fragment:26.1.0"<br> }</p> <p>使用与 Glide 依赖的支持库不同的版本可能会导致一些运行时异常，请参阅 <a href=https://github.com/bumptech/glide/issues/2730>#2730</a> 获取这方面的更多信息。</p> </blockquote> <p>现在正式准备添加Glide的依赖：</p> <div class=codehilite><pre><span></span>...
apply plugin: &#39;kotlin-kapt&#39;

dependencies {
    ...
    implementation &#39;com.github.bumptech.glide:glide:4.9.0&#39;
    kapt &#39;com.github.bumptech.glide:compiler:4.9.0&#39;
}
</pre></div> <p>因为Glide中需要用到网络功能，因此还得在<code>AndroidManifest.xml</code>中声明一下网络权限：</p> <div class=codehilite><pre><span></span><span class=nt>&lt;uses-permission</span> <span class=na>android:name=</span><span class=s>&quot;android.permission.INTERNET&quot;</span> <span class=nt>/&gt;</span>
</pre></div> <p>最后我们准备一个演示使用的Activity，里面放一个<code>ImageView</code>以及一个<code>Button</code>用来触发<code>Glide</code>的加载。这种简单的页面没有什么好说的，直接上示例代码：</p> <div class=codehilite><pre><span></span><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;android.support.constraint.ConstraintLayout</span>
    <span class=na>xmlns:android=</span><span class=s>&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class=na>xmlns:app=</span><span class=s>&quot;http://schemas.android.com/apk/res-auto&quot;</span>
    <span class=na>android:layout_width=</span><span class=s>&quot;match_parent&quot;</span>
    <span class=na>android:layout_height=</span><span class=s>&quot;match_parent&quot;</span><span class=nt>&gt;</span>

    <span class=nt>&lt;ImageView</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/ivGlide&quot;</span>
        <span class=na>android:layout_width=</span><span class=s>&quot;0dp&quot;</span>
        <span class=na>android:layout_height=</span><span class=s>&quot;0dp&quot;</span>
        <span class=na>app:layout_constraintStart_toStartOf=</span><span class=s>&quot;parent&quot;</span>
        <span class=na>app:layout_constraintEnd_toEndOf=</span><span class=s>&quot;parent&quot;</span>
        <span class=na>app:layout_constraintTop_toTopOf=</span><span class=s>&quot;parent&quot;</span>
        <span class=na>app:layout_constraintBottom_toBottomOf=</span><span class=s>&quot;parent&quot;</span><span class=nt>/&gt;</span>

    <span class=nt>&lt;android.support.design.widget.FloatingActionButton</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/fab&quot;</span>
        <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:layout_margin=</span><span class=s>&quot;24dp&quot;</span>
        <span class=na>android:src=</span><span class=s>&quot;@drawable/btn_camera&quot;</span>
        <span class=na>app:layout_constraintEnd_toEndOf=</span><span class=s>&quot;parent&quot;</span>
        <span class=na>app:layout_constraintBottom_toBottomOf=</span><span class=s>&quot;parent&quot;</span><span class=nt>/&gt;</span>

<span class=nt>&lt;/android.support.constraint.ConstraintLayout&gt;</span>
</pre></div> <div class=codehilite><pre><span></span><span class=k>class</span> <span class=nc>GlideActivity</span> <span class=p>:</span> <span class=n>AppCompatActivity</span><span class=p>()</span> <span class=p>{</span>

    <span class=k>override</span> <span class=k>fun</span> <span class=nf>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>:</span> <span class=n>Bundle</span><span class=p>?)</span> <span class=p>{</span>
        <span class=k>super</span><span class=p>.</span><span class=n>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>)</span>
        <span class=n>setContentView</span><span class=p>(</span><span class=n>R</span><span class=p>.</span><span class=n>layout</span><span class=p>.</span><span class=n>activity_glide</span><span class=p>)</span>

        <span class=n>fab</span><span class=p>.</span><span class=n>setOnClickListener</span> <span class=p>{</span>
            <span class=n>load</span><span class=p>()</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=k>private</span> <span class=k>fun</span> <span class=nf>load</span><span class=p>()</span> <span class=p>{</span>
        <span class=c1>// Glide加载代码</span>
    <span class=p>}</span>

    <span class=k>companion</span> <span class=k>object</span> <span class=p>{</span>
        <span class=c1>// 静态图片资源</span>
        <span class=k>private</span> <span class=k>const</span> <span class=k>val</span> <span class=py>URL</span> <span class=p>=</span> <span class=s>&quot;http://cn.bing.com/az/hprichbg/rb/Dongdaemun_ZH-CN10736487148_1920x1080.jpg&quot;</span>
        <span class=c1>// Gif资源</span>
        <span class=k>private</span> <span class=k>const</span> <span class=k>val</span> <span class=py>GIF_URL</span> <span class=p>=</span> <span class=s>&quot;http://p1.pstatp.com/large/166200019850062839d3&quot;</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div> <h2 id=2>2. 简单使用<a class=headerlink href=#2 title="Permanent link">&para;</a></h2> <p>多数情况下，使用Glide加载图片非常简单，一行代码足矣：</p> <div class=codehilite><pre><span></span><span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>).</span><span class=n>load</span><span class=p>(</span><span class=n>URL</span><span class=p>).</span><span class=n>into</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>实例效果运行如下：</p> <figure style="width: 25%" class=align-center> <img src=/assets/images/android/glide-3-step-example.gif> <figcaption>Glide加载结果</figcaption> </figure> <p>取消加载同样很简单：</p> <div class=codehilite><pre><span></span><span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>).</span><span class=n>clear</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>尽管及时取消不必要的加载是很好的实践，但这并不是必须的操作。<strong>实际上，当</strong><code>Glide.with()</code><strong>中传入的</strong><code>Activity</code><strong>或</strong><code>Fragment</code><strong>实例销毁时，Glide会自动取消加载并回收资源。</strong> </p> <p>在<code>ListView</code>或<code>RecyclerView</code>中加载图片的代码和在单独的View中加载完全一样。Glide已经自动处理了View的复用和请求的取消。 </p> <p>对url进行null检验并不是必须的，如果url为null，Glide会清空View的内容，或者显示<code>placeholder</code>或<code>fallback</code>的内容。 </p> <p>Glide唯一的要求是，对于任何可复用的View或Target，如果它们在之前的位置上，用Glide进行过加载操作，那么 <strong>在新的位置上要去执行一个新的加载操作，或调用</strong> <code>clear()</code><strong>API停止Glide的工作</strong>。 </p> <p>对View调用<code>clear()</code>或<code>into(View)</code>，表明在此之前的加载操作会被取消，并且在方法调用完成后，Glide不会改变view的内容。如果你忘记调用<code>clear()</code>，而又没有开启新的加载操作，那么就会出现这种情况：你已经为一个view设置好了一个Drawable，但该View在之前的位置上使用Glide进行过加载图片的操作，Glide加载完毕后可能会将这个View改回成原来的内容。</p> <p><code>Glide.with</code>方法有很多重载：</p> <ul> <li><code>with(@NonNull Context context)</code></li> <li><code>with(@NonNull View view)</code></li> <li><code>with(@NonNull Activity activity)</code></li> <li><code>with(@NonNull FragmentActivity activity)</code></li> <li><code>with(@NonNull Fragment fragment)</code></li> </ul> <p>在上面的重载方法中，除了前两个重载方法外，其他三个都有很直观的生命周期；至于前两个，会尝试绑定到Activity或Fragment上面，如果失败了就会绑定到Application级别的生命周期上。</p> <p><code>Glide.with</code>就返回了一个<code>RequestManager</code>实例，其<code>load</code>方法也有很多重载：</p> <ul> <li><code>load(@Nullable Bitmap bitmap)</code></li> <li><code>load(@Nullable Drawable drawable)</code></li> <li><code>load(@Nullable String string)</code></li> <li><code>load(@Nullable Uri uri)</code></li> <li><code>load(@Nullable File file)</code></li> <li><code>load(@RawRes @DrawableRes @Nullable Integer resourceId)</code></li> <li><code>load(@Nullable byte[] model)</code></li> <li><code>load(@Nullable Object model)</code></li> </ul> <p><code>RequestManager</code>除了上面的方法外，还有其他一些有用的方法：</p> <p>控制方法：</p> <ul> <li><code>isPaused()</code></li> <li><code>pauseRequests()</code></li> <li><code>pauseAllRequests()</code></li> <li><code>pauseRequestsRecursive()</code></li> <li><code>resumeRequests()</code></li> <li><code>resumeRequestsRecursive()</code></li> <li><code>clear(@NonNull View view)</code></li> <li><code>clear(@Nullable final Target&lt;?&gt; target)</code></li> </ul> <p>生命周期方法：</p> <ul> <li><code>onStart()</code></li> <li><code>onStop()</code></li> <li><code>onDestroy()</code></li> </ul> <p>其他方法：</p> <ul> <li><code>downloadOnly()</code></li> <li><code>download(@Nullable Object model)</code></li> <li><code>asBitmap()</code></li> <li><code>asGif()</code></li> <li><code>asDrawable()</code></li> <li><code>asFile()</code></li> <li><code>as(@NonNull Class&lt;ResourceType&gt; resourceClass)</code></li> </ul> <p><code>RequestManager.load</code>之后就返回了一个<code>RequestBuilder</code>对象，调用该对象的<code>into(@NonNull ImageView view)</code>方法就完成了Glide加载的三步。当然此方法还有一些高级的重载方法，我们后面在说。<br> 此外，上面提到的<code>RequestManager</code>的7个其他方法也都会返回一个<code>RequestBuilder</code>对象，而此时还没有设置要加载的资源，所以<code>RequestBuilder</code>也提供了很多<code>load</code>方法来设置要加载资源。</p> <p>以上就是Glide三步(<code>with</code>、<code>load</code>、<code>into</code>)的简要说明。下面接着说一些拓展内容，但也很基础。</p> <h3 id=21>2.1 占位符<a class=headerlink href=#21 title="Permanent link">&para;</a></h3> <p>占位符类型有三种，分别在三种不同场景使用：</p> <ul> <li><code>placeholder</code><br> <code>placeholder</code>是当请求正在执行时被展示的Drawables。当请求成功完成时，<code>placehodler</code>会被请求到的资源替换。如果被请求的资源是从内存中加载出来的，那么<code>placehodler</code>可能根本不会被显示。如果请求失败并且没有设置<code>error</code>，则<code>placehodler</code>将被持续展示。类似地，如果请求的url/model为null，并且<code>error</code>和<code>fallback</code>都没有设置，那么<code>placehodler</code>也会继续显示。</li> <li><code>error</code><br> <code>error</code>在请求永久性失败时展示。<code>error</code>同样也在请求的url/model为null，且并没有设置<code>fallback</code>时展示。</li> <li><code>fallback</code><br> <code>fallback</code>在请求的url/model为null时展示。设计<code>fallback</code>的主要目的是允许用户指示null是否为可接受的正常情况。例如，一个null的个人资料url可能暗示这个用户没有设置头像，因此应该使用默认头像。然而，null也可能表明这个元数据根本就是不合法的，或者取不到。<strong>默认情况下Glide将null作为错误处理</strong>，所以可以接受null的应用应当显式地设置一个<code>fallback</code>。</li> </ul> <figure style="width: 98%" class=align-center> <img src=/assets/images/android/glide-placeholders-show-logic.png> <figcaption>占位符显示逻辑</figcaption> </figure> <blockquote> <p>model为null时，显示逻辑代码如下，具体会在<a href=/android/3rd-library/glide2/#32-requestmanagertrack>Glide v4 源码解析（二）</a>中讨论 <div class=codehilite><pre><span></span><span class=kd>private</span> <span class=kd>synchronized</span> <span class=kt>void</span> <span class=nf>setErrorPlaceholder</span><span class=p>()</span> <span class=p>{</span>
  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>canNotifyStatusChanged</span><span class=p>())</span> <span class=p>{</span>
    <span class=k>return</span><span class=p>;</span>
  <span class=p>}</span>

  <span class=n>Drawable</span> <span class=n>error</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
  <span class=k>if</span> <span class=p>(</span><span class=n>model</span> <span class=o>==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>error</span> <span class=o>=</span> <span class=n>getFallbackDrawable</span><span class=p>();</span>
  <span class=p>}</span>
  <span class=c1>// Either the model isn&#39;t null, or there was no fallback drawable set.</span>
  <span class=k>if</span> <span class=p>(</span><span class=n>error</span> <span class=o>==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>error</span> <span class=o>=</span> <span class=n>getErrorDrawable</span><span class=p>();</span>
  <span class=p>}</span>
  <span class=c1>// The model isn&#39;t null, no fallback drawable was set or no error drawable was set.</span>
  <span class=k>if</span> <span class=p>(</span><span class=n>error</span> <span class=o>==</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>error</span> <span class=o>=</span> <span class=n>getPlaceholderDrawable</span><span class=p>();</span>
  <span class=p>}</span>
  <span class=n>target</span><span class=p>.</span><span class=na>onLoadFailed</span><span class=p>(</span><span class=n>error</span><span class=p>);</span>
<span class=p>}</span>
</pre></div></p> </blockquote> <p>我们准备使用这段代码演示一下。<br> 注意，为了忽略缓存的影响，这里设置了忽略内存缓存<code>skipMemoryCache(true)</code>并将磁盘缓存策略设置为不缓存<code>diskCacheStrategy(DiskCacheStrategy.NONE)</code>。</p> <div class=codehilite><pre><span></span><span class=k>val</span> <span class=py>option</span> <span class=p>=</span> <span class=n>RequestOptions</span><span class=p>()</span>
    <span class=p>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>GRAY</span><span class=p>))</span>
    <span class=p>.</span><span class=n>error</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>RED</span><span class=p>))</span>
    <span class=p>.</span><span class=n>fallback</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>CYAN</span><span class=p>))</span>
    <span class=p>.</span><span class=n>skipMemoryCache</span><span class=p>(</span><span class=k>true</span><span class=p>)</span>
    <span class=p>.</span><span class=n>diskCacheStrategy</span><span class=p>(</span><span class=n>DiskCacheStrategy</span><span class=p>.</span><span class=n>NONE</span><span class=p>)</span>

<span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
    <span class=p>.</span><span class=n>load</span><span class=p>(</span><span class=n>URL</span><span class=p>)</span>
    <span class=p>.</span><span class=n>apply</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
    <span class=p>.</span><span class=n>into</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>上面的代码也可以这么写：</p> <div class=codehilite><pre><span></span><span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
    <span class=p>.</span><span class=n>load</span><span class=p>(</span><span class=n>URL</span><span class=p>)</span>
    <span class=p>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>GRAY</span><span class=p>))</span>
    <span class=p>.</span><span class=n>error</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>RED</span><span class=p>))</span>
    <span class=p>.</span><span class=n>fallback</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>CYAN</span><span class=p>))</span>
    <span class=p>.</span><span class=n>skipMemoryCache</span><span class=p>(</span><span class=k>true</span><span class=p>)</span>
    <span class=p>.</span><span class=n>diskCacheStrategy</span><span class=p>(</span><span class=n>DiskCacheStrategy</span><span class=p>.</span><span class=n>NONE</span><span class=p>)</span>
    <span class=p>.</span><span class=n>into</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>使用<code>RequestOptions()</code>更方便，因为可以多个Glide加载语句共用这些通用设置。</p> <p>下面展示了正确加载时、加载字符空串时的图：</p> <figure style="width: 25%" class=align-center> <img src=/assets/images/android/glide-placeholder-success-example.gif> <figcaption>Glide正确加载</figcaption> <img src=/assets/images/android/glide-error-example.gif> <figcaption>Glide加载空串</figcaption> </figure> <div class="admonition tip"> <p class=admonition-title>From: <a href=https://muyangmin.github.io/glide-docs-cn/doc/placeholders.html#faq>Placeholders#FAQ</a></p> <p><strong>1. 占位符是异步加载的吗？</strong><br> No。占位符是在主线程从Android Resources加载的。我们通常希望占位符比较小且容易被系统资源缓存机制缓存起来。<br> <strong>2. 变换是否会被应用到占位符上？</strong><br> No。Transformation仅被应用于被请求的资源，而不会对任何占位符使用。<br> 在应用中包含必须在运行时做变换才能使用的图片资源是很不划算的。相反，在应用中包含一个确切符合尺寸和形状要求的资源版本几乎总是一个更好的办法。假如你正在加载圆形图片，你可能希望在你的应用中包含圆形的占位符。另外你也可以考虑自定义一个View来剪裁(clip)你的占位符，而达到你想要的变换效果。<br> <strong>3. 在多个不同的View上使用相同的Drawable可行么？</strong><br> 通常可以，但不是绝对的。任何无状态(non-stateful)的Drawable（例如 BitmapDrawable）通常都是ok的。但是有状态的Drawable不一样，在同一时间多个View上展示它们通常不是很安全，因为多个View会立刻修改(mutate) Drawable。对于有状态的Drawable，建议传入一个资源ID，或者使用<code>newDrawable()</code>来给每个请求传入一个新的拷贝。</p> </div> <h3 id=22>2.2 指定图片格式<a class=headerlink href=#22 title="Permanent link">&para;</a></h3> <p>Glide支持加载GIF，Picasso不支持。而且Glide加载GIF不需要额外的代码，其内部会判断图片格式。</p> <p>我们可以直接使用下面的示例代码加载GIF：</p> <div class=codehilite><pre><span></span><span class=k>val</span> <span class=py>option</span> <span class=p>=</span> <span class=n>RequestOptions</span><span class=p>()</span>
    <span class=p>.</span><span class=n>placeholder</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>GRAY</span><span class=p>))</span>
    <span class=p>.</span><span class=n>error</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>RED</span><span class=p>))</span>
    <span class=p>.</span><span class=n>fallback</span><span class=p>(</span><span class=n>ColorDrawable</span><span class=p>(</span><span class=n>Color</span><span class=p>.</span><span class=n>CYAN</span><span class=p>))</span>
    <span class=p>.</span><span class=n>skipMemoryCache</span><span class=p>(</span><span class=k>true</span><span class=p>)</span>
    <span class=p>.</span><span class=n>diskCacheStrategy</span><span class=p>(</span><span class=n>DiskCacheStrategy</span><span class=p>.</span><span class=n>NONE</span><span class=p>)</span>

<span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
    <span class=p>.</span><span class=n>load</span><span class=p>(</span><span class=n>GIF_URL</span><span class=p>)</span>
    <span class=p>.</span><span class=n>apply</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
    <span class=p>.</span><span class=n>into</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>运行结果如下图所示：</p> <figure style="width: 25%" class=align-center> <img src=/assets/images/android/glide-load-gif.gif> <figcaption>Glide加载GIF</figcaption> </figure> <p>现在我们只想加载静态图片，我们可以在<code>Glide.with</code>后面追加<code>asBitmap()</code>方法实现：</p> <div class=codehilite><pre><span></span><span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
    <span class=p>.</span><span class=n>asBitmap</span><span class=p>()</span>
    <span class=p>.</span><span class=n>load</span><span class=p>(</span><span class=n>GIF_URL</span><span class=p>)</span>
    <span class=p>.</span><span class=n>apply</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
    <span class=p>.</span><span class=n>into</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>由于调用了<code>asBitmap()</code>方法，现在GIF图就无法正常播放了，而是会在界面上显示第一帧的图片。</p> <figure style="width: 25%" class=align-center> <img src=/assets/images/android/glide-load-gif-with-asbitmap.gif> <figcaption>Glide asBitmap加载GIF</figcaption> </figure> <p>同理，我们在加载普通图片时追加<code>asGif()</code>会怎么样呢：</p> <div class=codehilite><pre><span></span><span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
    <span class=p>.</span><span class=n>asGif</span><span class=p>()</span>
    <span class=p>.</span><span class=n>load</span><span class=p>(</span><span class=n>URL</span><span class=p>)</span>
    <span class=p>.</span><span class=n>apply</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
    <span class=p>.</span><span class=n>into</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>很不幸，显示加载错误图片：</p> <figure style="width: 25%" class=align-center> <img src=/assets/images/android/glide-load-url-with-asgif.gif> <figcaption>Glide asGif加载普通图片</figcaption> </figure> <h3 id=23>2.3 指定图片大小<a class=headerlink href=#23 title="Permanent link">&para;</a></h3> <p>实际上，使用Glide在绝大多数情况下我们都是不需要指定图片大小的。</p> <p>在学习本节内容之前，你可能还需要先了解一个概念，就是我们平时在加载图片的时候很容易会造成内存浪费。什么叫内存浪费呢？比如说一张图片的尺寸是1000*1000像素，但是我们界面上的ImageView可能只有200*200像素，这个时候如果你不对图片进行任何压缩就直接读取到内存中，这就属于内存浪费了，因为程序中根本就用不到这么高像素的图片。</p> <p>而使用Glide，我们就完全不用担心图片内存浪费，甚至是内存溢出的问题。因为Glide从来都不会直接将图片的完整尺寸全部加载到内存中，而是用多少加载多少。Glide会自动判断ImageView的大小，然后只将这么大的图片像素加载到内存当中，帮助我们节省内存开支。</p> <p>也正是因为Glide是如此的智能，所以刚才在开始的时候我就说了，在绝大多数情况下我们都是不需要指定图片大小的，因为Glide会自动根据ImageView的大小来决定图片的大小。</p> <p>不过，如果你真的有这样的需求，必须给图片指定一个固定的大小，Glide仍然是支持这个功能的。修改Glide加载部分的代码，如下所示：</p> <div class=codehilite><pre><span></span><span class=n>Glide</span><span class=p>.</span><span class=n>with</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
    <span class=p>.</span><span class=n>load</span><span class=p>(</span><span class=n>URL</span><span class=p>)</span>
    <span class=p>.</span><span class=n>apply</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
    <span class=p>.</span><span class=k>override</span><span class=p>(</span><span class=m>100</span><span class=p>)</span>
    <span class=p>.</span><span class=n>into</span><span class=p>(</span><span class=n>ivGlide</span><span class=p>)</span>
</pre></div> <p>仍然非常简单，这里使用<code>override()</code>方法指定了一个图片的尺寸，也就是说，Glide现在只会将图片加载成100*100像素的尺寸，而不会管你的ImageView的大小是多少了。</p> <p>对比图如下所示：</p> <figure style="width: 50%" class=align-center> <img src=/assets/images/android/glide-load-png-override-compare.png> <figcaption>override加载前后对比</figcaption> </figure> <p>本章目前为止已经将一些常用的基本的内容了解了。下一章将深入源码进行探索，看看Glide为何这么强大。</p> <hr> <div class=md-source-date> <small> 最后更新: 2020年5月16日 </small> </div> <h2 id=__comments>评论</h2> <div id=disqus_thread></div> <script>
    var disqus_config = function () {
      this.page.url = "https://blog.yorek.xyz/about-me/android/3rd-library/glide1/";
      this.page.identifier =
        "/android/3rd-library/glide1/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//yorekliu.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../other/RxJava/ title=RxJava操作符大全 class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 上一页 </span> RxJava操作符大全 </span> </div> </a> <a href=../glide2/ title="Glide v4 源码解析（二）" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 下一页 </span> Glide v4 源码解析（二） </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> &copy; 2020 Yorek </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> <div class=md-footer-social> <link rel=stylesheet href=../../../assets/fonts/font-awesome.css> <a href=https://github.com/YorekLiu class="md-footer-social__link fa fa-github"></a> <a href=lyytogether@gmail.com class="md-footer-social__link fa fa-email"></a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.808e90bb.js></script> <script src=../../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../../assets/javascripts/lunr/tinyseg.js></script> <script src=../../../assets/javascripts/lunr/lunr.ja.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>