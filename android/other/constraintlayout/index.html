<!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="An Android Developer."><link href=https://blog.yorek.xyz/about-me/android/other/constraintlayout/ rel=canonical><meta name=author content="Yorek Liu"><meta name=lang:clipboard.copy content=复制><meta name=lang:clipboard.copied content=已复制><meta name=lang:search.language content=ja><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content=没有找到符合条件的结果><meta name=lang:search.result.one content="找到 1 个符合条件的结果"><meta name=lang:search.result.other content="# 个符合条件的结果"><meta name=lang:search.tokenizer content=[\uff0c\u3002]+><link rel="shortcut icon" href=../../../assets/images/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.6.0"><title>ConstraintLayout使用大全</title><link rel=stylesheet href=../../../assets/stylesheets/application.1b62728e.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.a8b3c06d.css><meta name=theme-color content><script src=../../../assets/javascripts/modernizr.268332fc.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../assets/fonts/material-icons.css><link rel=manifest href=../../../manifest.webmanifest><script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-155096376-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script><script async src=https://www.google-analytics.com/analytics.js></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Yorek's - ConstraintLayout使用大全"><meta property=og:description content="An Android Developer."><meta content=https://blog.yorek.xyz/about-me/android/other/constraintlayout/ property=og:url><meta property=og:image content=https://blog.yorek.xyz/about-meassets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><!-- Twitter meta tags --><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@squidfunk><meta name=twitter:creator content=@squidfunk><meta name=twitter:title content="Yorek's - ConstraintLayout使用大全"><meta name=twitter:description content="An Android Developer."><meta name=twitter:image content=https://blog.yorek.xyz/about-meassets/images/banner.png></head> <body dir=ltr data-md-color-primary=white data-md-color-accent=blue> <svg class=md-svg> <defs> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#1 tabindex=1 class=md-skip> 跳转至 </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://blog.yorek.xyz/about-me title="Yorek's" class="md-header-nav__button md-logo"> <img src=../../../assets/images/favicon.ico width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Yorek's </span> <span class=md-header-nav__topic> ConstraintLayout使用大全 </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> 键入以开始搜索 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../3rd-library/3rd-library-source-code/ class="md-tabs__link md-tabs__link--active"> Android </a> </li> <li class=md-tabs__item> <a href=../../../flutter/flutter_first_project_1/ class=md-tabs__link> Flutter </a> </li> <li class=md-tabs__item> <a href=../../../leetcode/ class=md-tabs__link> LeetCode </a> </li> <li class=md-tabs__item> <a href=../../../design-pattern/design-pattern/ class=md-tabs__link> Books </a> </li> </ul> </div> </nav> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://blog.yorek.xyz/about-me title="Yorek's" class="md-nav__button md-logo"> <img src=../../../assets/images/favicon.ico width=48 height=48> </a> Yorek's </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Android </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Android </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-1 type=checkbox id=nav-2-1 checked> <label class=md-nav__link for=nav-2-1> 三方库源码解析 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-1> 三方库源码解析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../3rd-library/3rd-library-source-code/ title=Android三方库源码分析 class=md-nav__link> Android三方库源码分析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/matrix/ title="微信APM Matrix解析" class=md-nav__link> 微信APM Matrix解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/matrix-trace/ title=Matrix-TraceCanary解析 class=md-nav__link> Matrix-TraceCanary解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/matrix-io/ title=Matrix-IOCanary解析 class=md-nav__link> Matrix-IOCanary解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/matrix-resource/ title=Matrix-ResourceCanary解析 class=md-nav__link> Matrix-ResourceCanary解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/matrix-sqlitelint/ title=Matrix-SQLiteLint解析 class=md-nav__link> Matrix-SQLiteLint解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/okhttp/ title=OkHttp3源码解析 class=md-nav__link> OkHttp3源码解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/retrofit/ title=Retrofit2源码解析 class=md-nav__link> Retrofit2源码解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/rxjava&rxandroid/ title=RxJava源码解析及使用实例 class=md-nav__link> RxJava源码解析及使用实例 </a> </li> <li class=md-nav__item> <a href=../RxJava/ title=RxJava操作符大全 class=md-nav__link> RxJava操作符大全 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/glide1/ title="Glide v4 源码解析（一）" class=md-nav__link> Glide v4 源码解析（一） </a> </li> <li class=md-nav__item> <a href=../../3rd-library/glide2/ title="Glide v4 源码解析（二）" class=md-nav__link> Glide v4 源码解析（二） </a> </li> <li class=md-nav__item> <a href=../../3rd-library/glide3/ title="Glide v4 源码解析（三）" class=md-nav__link> Glide v4 源码解析（三） </a> </li> <li class=md-nav__item> <a href=../../3rd-library/glide4/ title="Glide v4 源码解析（四）" class=md-nav__link> Glide v4 源码解析（四） </a> </li> <li class=md-nav__item> <a href=../../3rd-library/glide5/ title="Glide v4 源码解析（五）" class=md-nav__link> Glide v4 源码解析（五） </a> </li> <li class=md-nav__item> <a href=../../3rd-library/glide6/ title="Glide v4 源码解析（六）" class=md-nav__link> Glide v4 源码解析（六） </a> </li> <li class=md-nav__item> <a href=../../3rd-library/glide7/ title="Glide v4 源码解析（七）" class=md-nav__link> Glide v4 源码解析（七） </a> </li> <li class=md-nav__item> <a href=../../3rd-library/migrate-to-glide/ title=杂记：从Picasso迁移至Glide class=md-nav__link> 杂记：从Picasso迁移至Glide </a> </li> <li class=md-nav__item> <a href=../../3rd-library/eventbus/ title=EventBus源码解析 class=md-nav__link> EventBus源码解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/leakcanary/ title=LeakCanary2源码解析 class=md-nav__link> LeakCanary2源码解析 </a> </li> <li class=md-nav__item> <a href=../../3rd-library/permissiondispatcher/ title=PermissionDispatcher源码解析 class=md-nav__link> PermissionDispatcher源码解析 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> ConstraintLayout使用大全 </label> <a href=./ title=ConstraintLayout使用大全 class="md-nav__link md-nav__link--active"> ConstraintLayout使用大全 </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1. 相对定位 </a> </li> <li class=md-nav__item> <a href=#2-margins class=md-nav__link> 2. Margins </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-gonemargins class=md-nav__link> 2.1 作用到GONE控件上的Margins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-bias class=md-nav__link> 3. 居中和偏移(Bias) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-bias class=md-nav__link> 3.1 偏移(Bias) </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-11 class=md-nav__link> 4. 圆形定位（1.1新增） </a> </li> <li class=md-nav__item> <a href=#5 class=md-nav__link> 5. 可见性行为 </a> </li> <li class=md-nav__item> <a href=#6 class=md-nav__link> 6. 尺寸约束 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61-constraintlayout class=md-nav__link> 6.1 ConstraintLayout中的最小尺寸 </a> </li> <li class=md-nav__item> <a href=#62-widget class=md-nav__link> 6.2 Widget的尺寸约束 </a> </li> <li class=md-nav__item> <a href=#63-wrap_content-11 class=md-nav__link> 6.3 WRAP_CONTENT: 强制约束（1.1新增） </a> </li> <li class=md-nav__item> <a href=#64-match_constraint-11 class=md-nav__link> 6.4 MATCH_CONSTRAINT 尺寸（1.1新增） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-chains class=md-nav__link> 7. 链（Chains） </a> </li> <li class=md-nav__item> <a href=#8-virtual-helper-objects class=md-nav__link> 8. 虚拟辅助对象（Virtual Helper objects） </a> </li> <li class=md-nav__item> <a href=#9-optimizer-11 class=md-nav__link> 9. Optimizer (1.1版本中) </a> </li> <li class=md-nav__item> <a href=#10-constraintset class=md-nav__link> 10. ConstraintSet </a> </li> <li class=md-nav__item> <a href=#__comments class="md-nav__link md-nav__link--active"> 评论 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../dagger2/ title=初学者的Dagger2教程 class=md-nav__link> 初学者的Dagger2教程 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> Android开发高手课 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-2> Android开发高手课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../paid/master/ title=Android开发高手课 class=md-nav__link> Android开发高手课 </a> </li> <li class=md-nav__item> <a href=../../paid/master/crash_1/ title="01 | 崩溃优化（上）：关于“崩溃”那些事儿" class=md-nav__link> 01 | 崩溃优化（上）：关于“崩溃”那些事儿 </a> </li> <li class=md-nav__item> <a href=../../paid/master/crash_2/ title="02 | 崩溃优化（下）：应用崩溃了，你应该如何去分析？" class=md-nav__link> 02 | 崩溃优化（下）：应用崩溃了，你应该如何去分析？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/memory_1/ title="03 | 内存优化（上）：4GB内存时代，再谈内存优化" class=md-nav__link> 03 | 内存优化（上）：4GB内存时代，再谈内存优化 </a> </li> <li class=md-nav__item> <a href=../../paid/master/memory_2/ title="04 | 内存优化（下）：内存优化这件事，应该从哪里着手？" class=md-nav__link> 04 | 内存优化（下）：内存优化这件事，应该从哪里着手？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/stuck_1/ title="05 | 卡顿优化（上）：你要掌握的卡顿分析方法" class=md-nav__link> 05 | 卡顿优化（上）：你要掌握的卡顿分析方法 </a> </li> <li class=md-nav__item> <a href=../../paid/master/stuck_2/ title="06 | 卡顿优化（下）：如何监控应用卡顿？" class=md-nav__link> 06 | 卡顿优化（下）：如何监控应用卡顿？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/stuck_3/ title="06补充篇 | 卡顿优化：卡顿现场与卡顿分析" class=md-nav__link> 06补充篇 | 卡顿优化：卡顿现场与卡顿分析 </a> </li> <li class=md-nav__item> <a href=../../paid/master/start_1/ title="07 | 启动优化（上）：从启动过程看启动速度优化" class=md-nav__link> 07 | 启动优化（上）：从启动过程看启动速度优化 </a> </li> <li class=md-nav__item> <a href=../../paid/master/start_2/ title="08 | 启动优化（下）：优化启动速度的进阶方法" class=md-nav__link> 08 | 启动优化（下）：优化启动速度的进阶方法 </a> </li> <li class=md-nav__item> <a href=../../paid/master/io_1/ title="09 | I/O优化（上）：开发工程师必备的I/O优化知识" class=md-nav__link> 09 | I/O优化（上）：开发工程师必备的I/O优化知识 </a> </li> <li class=md-nav__item> <a href=../../paid/master/io_2/ title="10 | I/O优化（中）：不同I/O方式的使用场景是什么？" class=md-nav__link> 10 | I/O优化（中）：不同I/O方式的使用场景是什么？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/io_3/ title="11 | I/O优化（下）：如何监控线上I/O操作？" class=md-nav__link> 11 | I/O优化（下）：如何监控线上I/O操作？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/storage_1/ title="12 | 存储优化（上）：常见的数据存储方法有哪些？" class=md-nav__link> 12 | 存储优化（上）：常见的数据存储方法有哪些？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/storage_2/ title="13 | 存储优化（中）：如何优化数据存储？" class=md-nav__link> 13 | 存储优化（中）：如何优化数据存储？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/storage_3/ title="14 | 存储优化（下）：数据库SQLite的使用和优化" class=md-nav__link> 14 | 存储优化（下）：数据库SQLite的使用和优化 </a> </li> <li class=md-nav__item> <a href=../../paid/master/network_1/ title="15 | 网络优化（上）：移动开发工程师必备的网络优化知识" class=md-nav__link> 15 | 网络优化（上）：移动开发工程师必备的网络优化知识 </a> </li> <li class=md-nav__item> <a href=../../paid/master/network_2/ title="16 | 网络优化（中）：复杂多变的移动网络该如何优化？" class=md-nav__link> 16 | 网络优化（中）：复杂多变的移动网络该如何优化？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/network_3/ title="17 | 网络优化（下）：大数据下网络该如何监控？" class=md-nav__link> 17 | 网络优化（下）：大数据下网络该如何监控？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/battery_1/ title="18 | 耗电优化（上）：从电量优化的演进看耗电分析" class=md-nav__link> 18 | 耗电优化（上）：从电量优化的演进看耗电分析 </a> </li> <li class=md-nav__item> <a href=../../paid/master/battery_2/ title="19 | 耗电优化（下）：耗电的优化方法与线上监控" class=md-nav__link> 19 | 耗电优化（下）：耗电的优化方法与线上监控 </a> </li> <li class=md-nav__item> <a href=../../paid/master/ui_1/ title="20 | UI 优化（上）：UI 渲染的几个关键概念" class=md-nav__link> 20 | UI 优化（上）：UI 渲染的几个关键概念 </a> </li> <li class=md-nav__item> <a href=../../paid/master/ui_2/ title="21 | UI 优化（下）：如何优化 UI 渲染？" class=md-nav__link> 21 | UI 优化（下）：如何优化 UI 渲染？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/package_1/ title="22 | 包体积优化（上）：如何减少安装包大小？" class=md-nav__link> 22 | 包体积优化（上）：如何减少安装包大小？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/package_2/ title="23 | 包体积优化（下）：资源优化的进阶实践" class=md-nav__link> 23 | 包体积优化（下）：资源优化的进阶实践 </a> </li> <li class=md-nav__item> <a href=../../paid/master/compile/ title="26 | 关于编译，你需要了解什么？" class=md-nav__link> 26 | 关于编译，你需要了解什么？ </a> </li> <li class=md-nav__item> <a href=../../paid/master/bytecode/ title="27 | 编译插桩的三种方法：AspectJ、ASM、ReDex" class=md-nav__link> 27 | 编译插桩的三种方法：AspectJ、ASM、ReDex </a> </li> <li class=md-nav__item> <a href=../../paid/master/native_hook/ title="35 | Native Hook 技术，天使还是魔鬼？" class=md-nav__link> 35 | Native Hook 技术，天使还是魔鬼？ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-3 type=checkbox id=nav-2-3> <label class=md-nav__link for=nav-2-3> Framework系列 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-3> Framework系列 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../framework/Android四大组件(1)/ title=Activity class=md-nav__link> Activity </a> </li> <li class=md-nav__item> <a href=../../framework/Android四大组件(2)/ title=Service class=md-nav__link> Service </a> </li> <li class=md-nav__item> <a href=../../framework/Android四大组件(3)/ title=Broadcasts class=md-nav__link> Broadcasts </a> </li> <li class=md-nav__item> <a href=../../framework/Android四大组件(4)/ title="Content Providers与Fragment" class=md-nav__link> Content Providers与Fragment </a> </li> <li class=md-nav__item> <a href=../../framework/IPC机制/ title=IPC机制 class=md-nav__link> IPC机制 </a> </li> <li class=md-nav__item> <a href=../../framework/View的事件体系/ title=View的事件体系 class=md-nav__link> View的事件体系 </a> </li> <li class=md-nav__item> <a href=../../framework/View的绘制原理/ title=View的绘制原理 class=md-nav__link> View的绘制原理 </a> </li> <li class=md-nav__item> <a href=../../framework/RemoteViews/ title=RemoteViews class=md-nav__link> RemoteViews </a> </li> <li class=md-nav__item> <a href=../../framework/Drawable/ title=Android中的Drawable资源 class=md-nav__link> Android中的Drawable资源 </a> </li> <li class=md-nav__item> <a href=../../framework/Android动画/ title=Android动画 class=md-nav__link> Android动画 </a> </li> <li class=md-nav__item> <a href=../../framework/Window与WindowManager/ title=Window与WindowManager class=md-nav__link> Window与WindowManager </a> </li> <li class=md-nav__item> <a href=../../framework/四大组件启动过程/ title=四大组件启动过程 class=md-nav__link> 四大组件启动过程 </a> </li> <li class=md-nav__item> <a href=../../framework/Android消息机制/ title=Android消息机制 class=md-nav__link> Android消息机制 </a> </li> <li class=md-nav__item> <a href=../../framework/Android线程与线程池/ title=Android线程与线程池 class=md-nav__link> Android线程与线程池 </a> </li> <li class=md-nav__item> <a href=../../framework/Bitmap的缓存与加载/ title=Bitmap的缓存与加载 class=md-nav__link> Bitmap的缓存与加载 </a> </li> <li class=md-nav__item> <a href=../../framework/JNI与NDK/ title=JNI与NDK编程简介 class=md-nav__link> JNI与NDK编程简介 </a> </li> <li class=md-nav__item> <a href=../../framework/性能优化/ title=Android性能优化 class=md-nav__link> Android性能优化 </a> </li> <li class=md-nav__item> <a href=../../framework/binder1-mediaservice/ title=Binder深入理解——以MediaService为例 class=md-nav__link> Binder深入理解——以MediaService为例 </a> </li> <li class=md-nav__item> <a href=../../framework/binder2/ title=Binder深入理解——罗老师系列 class=md-nav__link> Binder深入理解——罗老师系列 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-4 type=checkbox id=nav-2-4> <label class=md-nav__link for=nav-2-4> 付费知识归档 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-4> 付费知识归档 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-4-1 type=checkbox id=nav-2-4-1> <label class=md-nav__link for=nav-2-4-1> 某圈问题索引 </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-2-4-1> 某圈问题索引 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../paid/zsxq/zsxq_index/ title=某圈问题索引 class=md-nav__link> 某圈问题索引 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week1-synchronized/ title=理解Java中synchronized关键词 class=md-nav__link> 理解Java中synchronized关键词 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week2-service/ title=理解Service class=md-nav__link> 理解Service </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week3-activity/ title=理解Activity的启动模式 class=md-nav__link> 理解Activity的启动模式 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week4-startActivityForResult/ title=关于startActivityForResult class=md-nav__link> 关于startActivityForResult </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week5-view/ title=关于View的知识 class=md-nav__link> 关于View的知识 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week6-gradle/ title=关于Gradle的知识 class=md-nav__link> 关于Gradle的知识 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week7-serialization/ title=关于序列化的知识 class=md-nav__link> 关于序列化的知识 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week10-classloader/ title=Android中的ClassLoader class=md-nav__link> Android中的ClassLoader </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week11-binder/ title=Binder简介 class=md-nav__link> Binder简介 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week12-retrofit-okhttp/ title=OkHttp和Retrofit的作用以及两者之间的联系 class=md-nav__link> OkHttp和Retrofit的作用以及两者之间的联系 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week14-jvm-gc/ title=JVM中垃圾回收策略 class=md-nav__link> JVM中垃圾回收策略 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week16-keep-app-alive/ title=进程保活 class=md-nav__link> 进程保活 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week17-android-components/ title=四大组件的作用以及多进程 class=md-nav__link> 四大组件的作用以及多进程 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week20-network-protocol/ title=网络协议 class=md-nav__link> 网络协议 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week21-mvc&amp;mvp&mvvm/ title=MVC、MVP和MVVM class=md-nav__link> MVC、MVP和MVVM </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week22-android-studio-build/ title="Android Studio build过程" class=md-nav__link> Android Studio build过程 </a> </li> <li class=md-nav__item> <a href=../../paid/zsxq/week23-load-large-bitmap/ title=大尺寸图片加载问题 class=md-nav__link> 大尺寸图片加载问题 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-5 type=checkbox id=nav-2-5> <label class=md-nav__link for=nav-2-5> 日常记录 </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-5> 日常记录 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../annotation/ title=注解的定义及解析 class=md-nav__link> 注解的定义及解析 </a> </li> <li class=md-nav__item> <a href=../best_throttle_in_mvvm/ title=这可能是MVVM中最优雅的按键防抖方案 class=md-nav__link> 这可能是MVVM中最优雅的按键防抖方案 </a> </li> <li class=md-nav__item> <a href=../android-jenkins/ title="Jenkins for android" class=md-nav__link> Jenkins for android </a> </li> <li class=md-nav__item> <a href=../SystemProrities/ title=普通Android程序使用SystemProrities class=md-nav__link> 普通Android程序使用SystemProrities </a> </li> <li class=md-nav__item> <a href=../recyclerview-cache/ title=ListView、RecyclerView缓存策略解析 class=md-nav__link> ListView、RecyclerView缓存策略解析 </a> </li> <li class=md-nav__item> <a href=../recyclerview-item-docoration/ title=RecyclerView高级特性——ItemDecoration class=md-nav__link> RecyclerView高级特性——ItemDecoration </a> </li> <li class=md-nav__item> <a href=../recyclerview-others/ title=RecyclerView的一些使用细节 class=md-nav__link> RecyclerView的一些使用细节 </a> </li> <li class=md-nav__item> <a href=../RecyclerView-Sort&Delete/ title=RecyclerView高级特性——拖拽排序以及滑动删除 class=md-nav__link> RecyclerView高级特性——拖拽排序以及滑动删除 </a> </li> <li class=md-nav__item> <a href=../FAB-Behavior/ title=FloatingActionButton上滑隐藏下滑显示 class=md-nav__link> FloatingActionButton上滑隐藏下滑显示 </a> </li> <li class=md-nav__item> <a href=../nestedscrolling/ title=NestedScrolling机制 class=md-nav__link> NestedScrolling机制 </a> </li> <li class=md-nav__item> <a href=../porterduff/ title=使用Porter-Duff合成数字图像 class=md-nav__link> 使用Porter-Duff合成数字图像 </a> </li> <li class=md-nav__item> <a href=../runtime/ title="Android Runtime" class=md-nav__link> Android Runtime </a> </li> <li class=md-nav__item> <a href=../android_alias/ title=Android马甲包的那些事儿 class=md-nav__link> Android马甲包的那些事儿 </a> </li> <li class=md-nav__item> <a href=../Android-Development-Tool/ title=Android神兵利器 class=md-nav__link> Android神兵利器 </a> </li> <li class=md-nav__item> <a href=../FileProvider/ title=FileProvider class=md-nav__link> FileProvider </a> </li> <li class=md-nav__item> <a href=../Android判断导航栏高度/ title=Android判断虚拟按键(导航栏)显示与否、高度以及获取屏幕实际高度 class=md-nav__link> Android判断虚拟按键(导航栏)显示与否、高度以及获取屏幕实际高度 </a> </li> <li class=md-nav__item> <a href=../Android图片选择器/ title=Android图片选择器 class=md-nav__link> Android图片选择器 </a> </li> <li class=md-nav__item> <a href=../Android底部导航栏框架/ title=Android原生底部导航栏 class=md-nav__link> Android原生底部导航栏 </a> </li> <li class=md-nav__item> <a href=../Android搜索栏的实现/ title=Android搜索栏的实现 class=md-nav__link> Android搜索栏的实现 </a> </li> <li class=md-nav__item> <a href=../Android暂停音乐播放器的播放/ title=Android暂停酷狗、网易云音乐等音乐播放器的播放 class=md-nav__link> Android暂停酷狗、网易云音乐等音乐播放器的播放 </a> </li> <li class=md-nav__item> <a href=../Android滑动返回实践/ title=Android滑动返回实践 class=md-nav__link> Android滑动返回实践 </a> </li> <li class=md-nav__item> <a href=../Android程序反编译/ title=MacOS下Android程序反编译 class=md-nav__link> MacOS下Android程序反编译 </a> </li> <li class=md-nav__item> <a href=../Android通讯录快速读取/ title=Android通讯录快速读取 class=md-nav__link> Android通讯录快速读取 </a> </li> <li class=md-nav__item> <a href=../soft-keyboard-in-app/ title=App内自定义软键盘 class=md-nav__link> App内自定义软键盘 </a> </li> <li class=md-nav__item> <a href=../腾讯X5内核入坑指南/ title="腾讯TBS X5浏览器内核入坑指南" class=md-nav__link> 腾讯TBS X5浏览器内核入坑指南 </a> </li> <li class=md-nav__item> <a href=../琐碎知识点/ title=琐碎知识点 class=md-nav__link> 琐碎知识点 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Flutter </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Flutter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_1/ title=年轻人的第一个Flutter程序(1) class=md-nav__link> 年轻人的第一个Flutter程序(1) </a> </li> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_2/ title=年轻人的第一个Flutter程序(2) class=md-nav__link> 年轻人的第一个Flutter程序(2) </a> </li> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_3/ title=年轻人的第一个Flutter程序(3) class=md-nav__link> 年轻人的第一个Flutter程序(3) </a> </li> <li class=md-nav__item> <a href=../../../flutter/flutter_first_project_4/ title=年轻人的第一个Flutter程序(4) class=md-nav__link> 年轻人的第一个Flutter程序(4) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> LeetCode </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> LeetCode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leetcode/ title=算法目录 class=md-nav__link> 算法目录 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_1/ title=数据结构、算法和数据操作 class=md-nav__link> 数据结构、算法和数据操作 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_3/ title=高质量的代码 class=md-nav__link> 高质量的代码 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_4/ title=解决问题的思路 class=md-nav__link> 解决问题的思路 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_5/ title=优化时间和空间效率 class=md-nav__link> 优化时间和空间效率 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/code_interviews_6/ title=面试中的各项能力 class=md-nav__link> 面试中的各项能力 </a> </li> <li class=md-nav__item> <a href=../../../leetcode/array/ title=Array class=md-nav__link> Array </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode1-10/ title=LeetCode(1-10) class=md-nav__link> LeetCode(1-10) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode11-20/ title=LeetCode(11-20) class=md-nav__link> LeetCode(11-20) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode21-30/ title=LeetCode(21-30) class=md-nav__link> LeetCode(21-30) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode31-40/ title=LeetCode(31-40) class=md-nav__link> LeetCode(31-40) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode41-50/ title=LeetCode(41-50) class=md-nav__link> LeetCode(41-50) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode51-60/ title=LeetCode(51-60) class=md-nav__link> LeetCode(51-60) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode61-70/ title=LeetCode(61-70) class=md-nav__link> LeetCode(61-70) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode71-80/ title=LeetCode(71-80) class=md-nav__link> LeetCode(71-80) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode81-90/ title=LeetCode(81-90) class=md-nav__link> LeetCode(81-90) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode91-100/ title=LeetCode(91-100) class=md-nav__link> LeetCode(91-100) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode101-110/ title=LeetCode(101-110) class=md-nav__link> LeetCode(101-110) </a> </li> <li class=md-nav__item> <a href=../../../leetcode/leetcode111-120/ title=LeetCode(111-120) class=md-nav__link> LeetCode(111-120) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Books </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Books </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-1 type=checkbox id=nav-5-1> <label class=md-nav__link for=nav-5-1> Design Pattern </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-1> Design Pattern </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../design-pattern/design-pattern/ title=设计模式概述 class=md-nav__link> 设计模式概述 </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/design-principle/ title=面向对象的六大原则 class=md-nav__link> 面向对象的六大原则 </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/singleton/ title=单例模式(Singleton) class=md-nav__link> 单例模式(Singleton) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/builder/ title=建造者模式(Builder) class=md-nav__link> 建造者模式(Builder) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/prototype/ title=原型模式(Prototype) class=md-nav__link> 原型模式(Prototype) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/factory-method/ title="工厂方法模式(Factory method)" class=md-nav__link> 工厂方法模式(Factory method) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/abstract-factory/ title="抽象工厂模式(Abstract factory)" class=md-nav__link> 抽象工厂模式(Abstract factory) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/proxy/ title=代理模式(Proxy) class=md-nav__link> 代理模式(Proxy) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/composite/ title=组合模式(Composite) class=md-nav__link> 组合模式(Composite) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/adapter/ title=适配器模式(Adapter) class=md-nav__link> 适配器模式(Adapter) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/decorator/ title=装饰模式(Decorator) class=md-nav__link> 装饰模式(Decorator) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/flyweight/ title=享元模式(Flyweight) class=md-nav__link> 享元模式(Flyweight) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/facade/ title=外观模式(Facade) class=md-nav__link> 外观模式(Facade) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/bridge/ title=桥接模式(Bridge) class=md-nav__link> 桥接模式(Bridge) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/strategy/ title=策略模式(Strategy) class=md-nav__link> 策略模式(Strategy) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/state/ title=状态模式(State) class=md-nav__link> 状态模式(State) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/chain-of-responsibility/ title="责任链模式(Chain of responsibility)" class=md-nav__link> 责任链模式(Chain of responsibility) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/interpreter/ title=解释器模式(Interpreter) class=md-nav__link> 解释器模式(Interpreter) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/command/ title=命令模式(Command) class=md-nav__link> 命令模式(Command) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/observer/ title=观察者模式(Observer) class=md-nav__link> 观察者模式(Observer) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/memento/ title=备忘录模式(Memento) class=md-nav__link> 备忘录模式(Memento) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/iterator/ title=迭代器模式(Iterator) class=md-nav__link> 迭代器模式(Iterator) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/template-method/ title="模版方法模式(Template method)" class=md-nav__link> 模版方法模式(Template method) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/visitor/ title=访问者模式(Visitor) class=md-nav__link> 访问者模式(Visitor) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/mediator/ title=中介者模式(Mediator) class=md-nav__link> 中介者模式(Mediator) </a> </li> <li class=md-nav__item> <a href=../../../design-pattern/confusing-design-pattern/ title=易混淆的设计模式 class=md-nav__link> 易混淆的设计模式 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Effective Java </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-2> Effective Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../effective-java/effective-java/ title="Effective Java概述" class=md-nav__link> Effective Java概述 </a> </li> <li class=md-nav__item> <a href=../../../effective-java/chapter1/ title=创建和销毁对象 class=md-nav__link> 创建和销毁对象 </a> </li> <li class=md-nav__item> <a href=../../../effective-java/chapter2/ title=对于所有对象都通用的方法 class=md-nav__link> 对于所有对象都通用的方法 </a> </li> <li class=md-nav__item> <a href=../../../effective-java/chapter3/ title=类和接口 class=md-nav__link> 类和接口 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> JVM </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-3> JVM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jvm/jvm-content/ title=深入理解Java虚拟机 class=md-nav__link> 深入理解Java虚拟机 </a> </li> <li class=md-nav__item> <a href=../../../jvm/java-memory-area-oom/ title=Java内存区域与内存溢出异常 class=md-nav__link> Java内存区域与内存溢出异常 </a> </li> <li class=md-nav__item> <a href=../../../jvm/java-gc/ title=垃圾收集器与内存分配策略 class=md-nav__link> 垃圾收集器与内存分配策略 </a> </li> <li class=md-nav__item> <a href=../../../jvm/class-struct/ title=类文件结构 class=md-nav__link> 类文件结构 </a> </li> <li class=md-nav__item> <a href=../../../jvm/load-class/ title=虚拟机类加载机制 class=md-nav__link> 虚拟机类加载机制 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-4 type=checkbox id=nav-5-4> <label class=md-nav__link for=nav-5-4> Java </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-4> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../java/generics-java-kotlin/ title=Java&Kotlin在泛型方面的区别 class=md-nav__link> Java&Kotlin在泛型方面的区别 </a> </li> <li class=md-nav__item> <a href=../../../java/java-collections/ title=Java集合总结 class=md-nav__link> Java集合总结 </a> </li> <li class=md-nav__item> <a href=../../../java/java-foundation/ title=Java常见概念 class=md-nav__link> Java常见概念 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-5 type=checkbox id=nav-5-5> <label class=md-nav__link for=nav-5-5> Refactoring </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-5> Refactoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../refactoring/refactoring/ title=重构：改善既有代码的设计 class=md-nav__link> 重构：改善既有代码的设计 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>目录</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1. 相对定位 </a> </li> <li class=md-nav__item> <a href=#2-margins class=md-nav__link> 2. Margins </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-gonemargins class=md-nav__link> 2.1 作用到GONE控件上的Margins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-bias class=md-nav__link> 3. 居中和偏移(Bias) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-bias class=md-nav__link> 3.1 偏移(Bias) </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-11 class=md-nav__link> 4. 圆形定位（1.1新增） </a> </li> <li class=md-nav__item> <a href=#5 class=md-nav__link> 5. 可见性行为 </a> </li> <li class=md-nav__item> <a href=#6 class=md-nav__link> 6. 尺寸约束 </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61-constraintlayout class=md-nav__link> 6.1 ConstraintLayout中的最小尺寸 </a> </li> <li class=md-nav__item> <a href=#62-widget class=md-nav__link> 6.2 Widget的尺寸约束 </a> </li> <li class=md-nav__item> <a href=#63-wrap_content-11 class=md-nav__link> 6.3 WRAP_CONTENT: 强制约束（1.1新增） </a> </li> <li class=md-nav__item> <a href=#64-match_constraint-11 class=md-nav__link> 6.4 MATCH_CONSTRAINT 尺寸（1.1新增） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-chains class=md-nav__link> 7. 链（Chains） </a> </li> <li class=md-nav__item> <a href=#8-virtual-helper-objects class=md-nav__link> 8. 虚拟辅助对象（Virtual Helper objects） </a> </li> <li class=md-nav__item> <a href=#9-optimizer-11 class=md-nav__link> 9. Optimizer (1.1版本中) </a> </li> <li class=md-nav__item> <a href=#10-constraintset class=md-nav__link> 10. ConstraintSet </a> </li> <li class=md-nav__item> <a href=#__comments class="md-nav__link md-nav__link--active"> 评论 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>ConstraintLayout使用大全</h1> <p>ConstraintLayout最基本的相对定位功能都足以替代RelativeLayout，更不要说其他牛逼的高级特性，比如约束宽高比、多控件整体居中、辅助线等。ConstraintLayout值得我们学习，功能非常强大，而且对于减少布局层级有非常大的帮助。<br> 但是其支持的属性非常之多，所以有些属性没有系统学习还是有点摸不着头脑，所以这里总结整理一下。 </p> <p>目前<a href=https://developer.android.com/jetpack/androidx/releases/constraintlayout>ConstraintLayout最新稳定版本为1.1.3</a>。本文是基于官方文档<a href=https://developer.android.com/reference/android/support/constraint/ConstraintLayout#developer-guide> Developer Guide </a>的翻译。</p> <p><strong>Tips</strong>: 现在都是androidx的年代了，但由于作者不想给测试各种东西的项目升级，所以代码也是非androidx的。注意一下，如有必要，请自行替换成androidx。</p> <h2 id=1>1. 相对定位<a class=headerlink href=#1 title="Permanent link">&para;</a></h2> <p>相对定位类似于RelativeLayout的作用，在水平轴和竖直轴上可以有如下约束：</p> <ul> <li>水平轴：left、right、start、end sides</li> <li>竖直轴：top、bottom sides 以及 text baseline</li> </ul> <p>例如，将button B 放到 button A 的右边（图1）</p> <p><img alt="图1 相对定位例子" src=/assets/images/android/constraintlayout-relative-position-example.png></p> <p><center>图1 相对定位例子</center></p> <p>xml代码如下：</p> <div class=codehilite><pre><span></span><span class=nt>&lt;Button</span> <span class=na>android:id=</span><span class=s>&quot;@+id/buttonA&quot;</span> <span class=err>...</span> <span class=nt>/&gt;</span> 
<span class=nt>&lt;Button</span> <span class=na>android:id=</span><span class=s>&quot;@+id/buttonB&quot;</span> <span class=err>...</span> 
        <span class=na>app:layout_constraintLeft_toRightOf=</span><span class=s>&quot;@+id/buttonA&quot;</span> <span class=nt>/&gt;</span>
</pre></div> <p>上面的代码告诉系统，我们想要button B的左侧被约束到button A的右侧。这样一个位置约束意味着系统尝试使这两侧在同一个位置上。</p> <p>下面是所有可用的约束（图2）：</p> <p><img alt="图2 相对定位约束" src=/assets/images/android/constraintlayout-relative-positioning-constraints.png></p> <p><center>图2 相对定位约束</center></p> <ul> <li><code>layout_constraintLeft_toLeftOf</code></li> <li><code>layout_constraintLeft_toRightOf</code></li> <li><code>layout_constraintRight_toLeftOf</code></li> <li><code>layout_constraintRight_toRightOf</code></li> <li><code>layout_constraintTop_toTopOf</code></li> <li><code>layout_constraintTop_toBottomOf</code></li> <li><code>layout_constraintBottom_toTopOf</code></li> <li><code>layout_constraintBottom_toBottomOf</code></li> <li><code>layout_constraintBaseline_toBaselineOf</code></li> <li><code>layout_constraintStart_toEndOf</code></li> <li><code>layout_constraintStart_toStartOf</code></li> <li><code>layout_constraintEnd_toStartOf</code></li> <li><code>layout_constraintEnd_toEndOf</code></li> </ul> <p>这些属性需要使用view的 <strong>id</strong> 或者 <strong>parent</strong> 作为值。</p> <h2 id=2-margins>2. Margins<a class=headerlink href=#2-margins title="Permanent link">&para;</a></h2> <p><img alt="图3 相对定位的margin" src=/assets/images/android/constraintlayout-relative-positioning-margin.png></p> <p><center>图3 相对定位的margin</center></p> <p>如果设置了margin，它们将会作用于对应的约束上（图3），将边距强制作为为目标和源之间的空间。通常有如下属性：</p> <ul> <li><code>android:layout_marginStart</code></li> <li><code>android:layout_marginEnd</code></li> <li><code>android:layout_marginLeft</code></li> <li><code>android:layout_marginTop</code></li> <li><code>android:layout_marginRight</code></li> <li><code>android:layout_marginBottom</code></li> </ul> <h3 id=21-gonemargins>2.1 作用到GONE控件上的Margins<a class=headerlink href=#21-gonemargins title="Permanent link">&para;</a></h3> <p>当 <strong>约束目标</strong> 的可见性为<code>View.GONE</code>时，可以使用以下属性指定要使用的不同的margin：</p> <ul> <li><code>layout_goneMarginStart</code></li> <li><code>layout_goneMarginEnd</code></li> <li><code>layout_goneMarginLeft</code></li> <li><code>layout_goneMarginTop</code></li> <li><code>layout_goneMarginRight</code></li> <li><code>layout_goneMarginBottom</code></li> </ul> <p>举一个简单的例子，两个Button的布局如下：</p> <div class=codehilite><pre><span></span><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;android.support.constraint.ConstraintLayout</span>
    <span class=err>...</span><span class=nt>&gt;</span>

    <span class=nt>&lt;Button</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/button1&quot;</span>
        <span class=err>...</span>
        <span class=na>app:layout_constraintStart_toStartOf=</span><span class=s>&quot;parent&quot;</span> <span class=nt>/&gt;</span>

    <span class=nt>&lt;Button</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/button2&quot;</span>
        <span class=err>...</span>
        <span class=na>app:layout_goneMarginStart=</span><span class=s>&quot;16dp&quot;</span>
        <span class=na>app:layout_constraintStart_toEndOf=</span><span class=s>&quot;@id/button1&quot;</span><span class=nt>/&gt;</span>

<span class=nt>&lt;/android.support.constraint.ConstraintLayout&gt;</span>
</pre></div> <p>当约束目标（button1）可见性分别为<code>View.VISIBLE</code>和<code>View.GONE</code>时，显示如下：</p> <figure class=half> <img src=/assets/images/android/constraintlayout-margin-gone-example-1.png> <img src=/assets/images/android/constraintlayout-margin-gone-example-2.png> </figure> <p><center>gone margin 对不同可见性的约束目标的作用</center></p> <h2 id=3-bias>3. 居中和偏移(Bias)<a class=headerlink href=#3-bias title="Permanent link">&para;</a></h2> <p>ConstraintLayout一个有用的方面在于如何处理“不可能”的约束。比如，布局代码如下：</p> <div class=codehilite><pre><span></span><span class=nt>&lt;android.support.constraint.ConstraintLayout</span> <span class=err>...</span><span class=nt>&gt;</span> 
    <span class=nt>&lt;Button</span> <span class=na>android:id=</span><span class=s>&quot;@+id/button&quot;</span> <span class=err>...</span> 
            <span class=na>app:layout_constraintLeft_toLeftOf=</span><span class=s>&quot;parent&quot;</span>
            <span class=na>app:layout_constraintRight_toRightOf=</span><span class=s>&quot;parent/</span><span class=nt>&gt;</span> 
<span class=err>&lt;</span>/&gt;
</pre></div> <p>除非ConstraintLayout恰好具有与Button完全相同的大小，否则上面两个约束不能同时满足（两条边都不会是我们想要的位置）。</p> <p>在这种情况下，约束的作用就像是相反的力量平等的拉Widget（图4），这样Widget最终将在父容器中居中。这同样适用于垂直方向上的情况。</p> <p><img alt="图4 居中定位" src=/assets/images/android/constraintlayout-centering-positioning.png></p> <p><center>图4 居中定位</center></p> <p>值得一提的是，在这两个约束的前提下，如果上面的Button的<code>layout_width</code>不同，效果也不同。如下所示：</p> <p><img src=/assets/images/android/constraintlayout-center-wrap-content.png> <img src=/assets/images/android/constraintlayout-center-match-parent.png> <img src=/assets/images/android/constraintlayout-center-0dp.png></p> <p><center>wrap content、match parent、0dp时的效果</center></p> <h3 id=31-bias>3.1 偏移(Bias)<a class=headerlink href=#31-bias title="Permanent link">&para;</a></h3> <p>上面这种相反的约束的效果默认是使Widget居中；但是我们可以使用bias属性调整力量的比例：</p> <ul> <li><code>layout_constraintHorizontal_bias</code></li> <li><code>layout_constraintVertical_bias</code></li> </ul> <p>比如，下面的代码可以使左侧使用30%的偏移而不是默认的50%，这样会使左侧更短，从而导致Widget更倾向于左侧（图5）：</p> <p><img alt="图5 调整了bias的居中定位" src=/assets/images/android/constraintlayout-centering-positioning-bias.png></p> <p><center>图5 调整了bias的居中定位</center></p> <div class=codehilite><pre><span></span><span class=nt>&lt;android.support.constraint.ConstraintLayout</span> <span class=err>...</span><span class=nt>&gt;</span> 
    <span class=nt>&lt;Button</span> <span class=na>android:id=</span><span class=s>&quot;@+id/button&quot;</span> <span class=err>...</span> 
            <span class=na>app:layout_constraintHorizontal_bias=</span><span class=s>&quot;0.3&quot;</span> 
            <span class=na>app:layout_constraintLeft_toLeftOf=</span><span class=s>&quot;parent&quot;</span> 
            <span class=na>app:layout_constraintRight_toRightOf=</span><span class=s>&quot;parent/</span><span class=nt>&gt;</span> 
<span class=err>&lt;</span>/&gt;
</pre></div> <p>使用偏移，我们可以制作更好地适应屏幕尺寸变化的用户界面。</p> <h2 id=4-11>4. 圆形定位（1.1新增）<a class=headerlink href=#4-11 title="Permanent link">&para;</a></h2> <p>我们可以用角度和距离来约束一个Widget的中心相对于另一个Widget的中心。这允许我们将Widget放在圆上（图6）。以下属性可以使用：</p> <ul> <li><code>layout_constraintCircle</code> : 另一个widget的id</li> <li><code>layout_constraintCircleRadius</code> : 到另一个widegt中心的距离</li> <li><code>layout_constraintCircleAngle</code> : Widget应该处于哪个角度 (0～360的角度)</li> </ul> <p><img src=/assets/images/android/constraintlayout-circle1.png style="border: none"> <img src=/assets/images/android/constraintlayout-circle2.png style="border: none"></p> <p><center>图6 圆形定位</center></p> <div class=codehilite><pre><span></span><span class=nt>&lt;Button</span> <span class=na>android:id=</span><span class=s>&quot;@+id/buttonA&quot;</span> <span class=err>...</span> <span class=nt>/&gt;</span> 
<span class=nt>&lt;Button</span> <span class=na>android:id=</span><span class=s>&quot;@+id/buttonB&quot;</span> <span class=err>...</span> 
        <span class=na>app:layout_constraintCircle=</span><span class=s>&quot;@+id/buttonA&quot;</span> 
        <span class=na>app:layout_constraintCircleRadius=</span><span class=s>&quot;100dp&quot;</span> 
        <span class=na>app:layout_constraintCircleAngle=</span><span class=s>&quot;45&quot;</span> <span class=nt>/&gt;</span>
</pre></div> <h2 id=5>5. 可见性行为<a class=headerlink href=#5 title="Permanent link">&para;</a></h2> <p>ConstraintLayout对标记为<code>View.GONE</code>的Widget有特定处理。</p> <p>像往常一样，<strong>GONE</strong> widgets 不会显示，也不是布局本身的一部分（即如果标记为GONE，它们的实际尺寸将不会更改）。</p> <p>但就布局计算而言，GONE widgets 仍然是其中的一部分，具有重要的区别：</p> <ul> <li>对于布局过程，它们的尺寸将被视为零（基本上，它们将被解析为一个点）</li> <li>如果他们对其他widgets有约束，它们仍然会起到作用，但任何边距都会好像等于零</li> </ul> <p><img alt="图7 可见性行为" src=/assets/images/android/constraintlayout-visibility-behavior.png></p> <p><center>图7 可见性行为</center></p> <p>这种特定的行为允许我们在构建布局时暂时将widget标记为GONE，而不会破坏布局（图7），这在进行简单的布局动画时尤其有用。 </p> <p><strong>注意：</strong> 使用的边距将是B在连接到A时定义的边距（例如图7）。在某些情况下，这可能不是我们想要的margin（例如，A距其容器的一边有100dp的边距，B到A只有16dp；如果A标记为GONE，那么B到容器的边距为16dp）。因此，我们可以指定在连接到标记为GONE的widget时要使用的备用margin（请参阅上面有关<a href=#21-gonemargins>作用到GONE控件上的Margins</a>的部分）。</p> <h2 id=6>6. 尺寸约束<a class=headerlink href=#6 title="Permanent link">&para;</a></h2> <h3 id=61-constraintlayout>6.1 ConstraintLayout中的最小尺寸<a class=headerlink href=#61-constraintlayout title="Permanent link">&para;</a></h3> <p>我们可以为ConstraintLayout本身定义最小和最大尺寸：</p> <ul> <li><code>android:minWidth</code> 设置layout的最小宽度</li> <li><code>android:minHeight</code> 设置layout的最小高度</li> <li><code>android:maxWidth</code> 设置layout的最大宽度</li> <li><code>android:maxHeight</code> 设置layout的最大高度</li> </ul> <p>当ConstraintLayout的尺寸被设置为<code>WRAP_CONTENT</code>时，这些最小、最大值会被使用。</p> <h3 id=62-widget>6.2 Widget的尺寸约束<a class=headerlink href=#62-widget title="Permanent link">&para;</a></h3> <p>widget的尺寸可以通过设置<code>android:layout_width</code>和<code>android:layout_height</code>的属性值来指定，有如下三种方式：</p> <ul> <li>使用具体值</li> <li>使用<code>WRAP_CONTENT</code>，这样widget会计算自身的尺寸</li> <li>使用<code>0dp</code>，这等于“<code>MATCH_CONSTRAINT</code>”</li> </ul> <p>前两种工作方式和其他布局一样。最后一种方式将会调整widget的尺寸来匹配设置的约束（参见图8，(a)为wrap_content，(b)为0dp）。如果设置了margin，它们将在计算中被考虑在内（图8，0dp的&copy;）。</p> <p><img alt="图8 尺寸约束" src=/assets/images/android/constraintlayoutdimension-match-constraints.png></p> <p><center>图8 尺寸约束</center></p> <p><strong>重要：</strong> 对于包含在ConstraintLayout中的Widget来说，不建议使用<code>MATCH_PARENT</code>。可以通过使用<code>MATCH_CONSTRAINT</code>来定义类似的行为，其中相应的left/right或top/bottom约束被设置为“<code>parent</code>”。</p> <h3 id=63-wrap_content-11>6.3 WRAP_CONTENT: 强制约束（1.1新增）<a class=headerlink href=#63-wrap_content-11 title="Permanent link">&para;</a></h3> <p>如果尺寸设置为<code>WRAP_CONTENT</code>，则在1.1之前的版本中，它们将被视为literal尺寸——这意味着约束不会限制最终的尺寸。虽然通常情况下，这就足够（并且更快），但在某些情况下，我们可能希望使用<code>WRAP_CONTENT</code>，同时仍然强制执行约束以限制最终的尺寸。在这种情况下，我们可以添加一个相应的属性：</p> <ul> <li><code>app:layout_constrainedWidth=”true|false”</code></li> <li><code>app:layout_constrainedHeight=”true|false”</code></li> </ul> <p>上面比较难理解，这里给出一个例子。button1居中显示，button2约束在button1的右边、parent的左边：</p> <div class=codehilite><pre><span></span><span class=nt>&lt;Button</span>
    <span class=na>android:id=</span><span class=s>&quot;@+id/button1&quot;</span>
    <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
    <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span>
    <span class=na>android:text=</span><span class=s>&quot;aaaaaaa&quot;</span>
    <span class=na>app:layout_constraintStart_toStartOf=</span><span class=s>&quot;parent&quot;</span>
    <span class=na>app:layout_constraintEnd_toEndOf=</span><span class=s>&quot;parent&quot;</span>
    <span class=na>app:layout_constraintTop_toTopOf=</span><span class=s>&quot;parent&quot;</span>
    <span class=na>app:layout_constraintBottom_toBottomOf=</span><span class=s>&quot;parent&quot;</span><span class=nt>/&gt;</span>

<span class=nt>&lt;Button</span>
    <span class=na>android:id=</span><span class=s>&quot;@+id/button2&quot;</span>
    <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
    <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span>
    <span class=na>android:text=</span><span class=s>&quot;22222222222222222222222222222&quot;</span>
    <span class=na>app:layout_constrainedWidth=</span><span class=s>&quot;true&quot;</span>
    <span class=na>android:layout_marginTop=</span><span class=s>&quot;40dp&quot;</span>
    <span class=na>app:layout_constraintTop_toTopOf=</span><span class=s>&quot;@id/button1&quot;</span>
    <span class=na>app:layout_constraintStart_toEndOf=</span><span class=s>&quot;@id/button1&quot;</span>
    <span class=na>app:layout_constraintEnd_toEndOf=</span><span class=s>&quot;parent&quot;</span><span class=nt>/&gt;</span>
</pre></div> <p>对button2使不使用<code>app:layout_constrainedWidth="true"</code>的效果如下：</p> <p><img src=/assets/images/android/constraintlayout-constrainted-width-before.png style="border: none"> <img src=/assets/images/android/constraintlayout-constrainted-width-after.png style="border: none"></p> <p><center>约束width前 &amp; 约束width后</center></p> <h3 id=64-match_constraint-11>6.4 MATCH_CONSTRAINT 尺寸（1.1新增）<a class=headerlink href=#64-match_constraint-11 title="Permanent link">&para;</a></h3> <p>当尺寸设置为<code>MATCH_CONSTRAINT</code>时（也就是设置为0dp），默认行为是使结果大小占用所有可用空间。几个额外的修饰符如下： </p> <ul> <li><code>layout_constraintWidth_min</code> 和 <code>layout_constraintHeight_min</code>：将设置此维度的最小大小 </li> <li><code>layout_constraintWidth_max</code> 和 <code>layout_constraintHeight_max</code>：将设置此维度的最大大小 </li> <li><code>layout_constraintWidth_percent</code> 和 <code>layout_constraintHeight_percent</code>：将此维度的大小设置为parent的百分比</li> </ul> <p>例如，使button1的宽度为parent的50%，可以这样：</p> <div class=codehilite><pre><span></span><span class=nt>&lt;Button</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/button1&quot;</span>
        <span class=na>android:layout_width=</span><span class=s>&quot;0dp&quot;</span>
        <span class=err>...</span>
        <span class=na>app:layout_constraintWidth_default=</span><span class=s>&quot;percent&quot;</span>
        <span class=na>app:layout_constraintWidth_percent=</span><span class=s>&quot;0.5&quot;</span>
        <span class=na>app:layout_constraintStart_toStartOf=</span><span class=s>&quot;parent&quot;</span>
        <span class=na>app:layout_constraintEnd_toEndOf=</span><span class=s>&quot;parent&quot;</span><span class=nt>/&gt;</span>
</pre></div> <p>&nbsp;</p> <p><font size=3><b>最小与最大</b></font> </p> <p>最小与最大的值可以是一个dp数值，也可以是“<code>wrap</code>”，后者将会使用<code>WRAP_CONTENT</code>的值。</p> <p>&nbsp;</p> <p><font size=3><b>百分比尺寸</b></font> </p> <p>想要使用百分比，我们需要按照以下步骤：</p> <ul> <li>尺寸必须设置为<code>MATCH_CONSTRAINT</code> (0dp)</li> <li>默认值应该设置为percent <code>app:layout_constraintWidth_default="percent"</code> 或 <code>app:layout_constraintHeight_default="percent"</code></li> <li>最后设置<code>layout_constraintWidth_percent</code> 或 <code>layout_constraintHeight_percent</code> 属性，值在0～1之间</li> </ul> <p>&nbsp;</p> <p><font size=3><b>比例</b></font> </p> <p>我们可以将Widget的一个维度定义为另一个维度的比例。为此，我们需要将至少一个约束维度设置为 <strong>0dp</strong> （即 <strong>MATCH_CONSTRAINT</strong> ），并将属性 <code>layout_constraintDimensionRatio</code> 设置为给定比率。例如：</p> <div class=codehilite><pre><span></span><span class=nt>&lt;Button</span> <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:layout_height=</span><span class=s>&quot;0dp&quot;</span>
        <span class=na>app:layout_constraintDimensionRatio=</span><span class=s>&quot;1:1&quot;</span> <span class=nt>/&gt;</span>
</pre></div> <p>上面的例子会将 button 的高度设置为与其宽度相同。</p> <p>比例可以是以下值：</p> <ul> <li>float值，代表宽比高的比例</li> <li><code>width:height</code>格式的字符串</li> </ul> <p>在宽高都被设置为<code>MATCH_CONSTRAINT</code> (0dp)时，我们也可以使用比例。这种情况下，系统会在满足所有约束，且维持指定比例的情况下，设置最大的尺寸。<br> 我们还可以基于一个维度的尺寸来约束另一个维度的尺寸，只需要在比例中添加"<strong>W,</strong>"或"<strong>H,</strong>"前缀来约束宽或高。比如，button 的一个维度被两个条件约束（e.g. 宽为0dp，在父布局中居中），我们可以通过在比例前增加“<strong>W</strong>”（约束宽）或“<strong>H</strong>”（约束高），并以逗号分割来指定约束哪个维度。</p> <div class=codehilite><pre><span></span><span class=nt>&lt;Button</span> <span class=na>android:layout_width=</span><span class=s>&quot;0dp&quot;</span> 
        <span class=na>android:layout_height=</span><span class=s>&quot;0dp&quot;</span> 
        <span class=na>app:layout_constraintDimensionRatio=</span><span class=s>&quot;H,16:9&quot;</span> 
        <span class=na>app:layout_constraintBottom_toBottomOf=</span><span class=s>&quot;parent&quot;</span> 
        <span class=na>app:layout_constraintTop_toTopOf=</span><span class=s>&quot;parent&quot;</span><span class=nt>/&gt;</span>
</pre></div> <p>上面的例子中，首先高度服从约束，所以高度为parent的高度；然后，宽度会服从比例的约束，高：宽=16：9。这个button的最终结果就是，如果parent大小刚好是16:9，那么button就会刚好占满整个屏幕。</p> <blockquote> <p>app:layout_constraintDimensionRatio="H,16:9" 指的是 H:W=16:9<br> app:layout_constraintDimensionRatio="W,16:9" 指的是 W:H=16:9<br> app:layout_constraintDimensionRatio="16:9" 指的是 W:H=16:9</p> </blockquote> <h2 id=7-chains>7. 链（Chains）<a class=headerlink href=#7-chains title="Permanent link">&para;</a></h2> <p>链提供了一条轴（水平或数值）上的群体行为。另一条轴可以单独约束。</p> <p>&nbsp;</p> <p><font size=3><b>创建链</b></font> </p> <p>一系列彼此之间双向连接的widgets可以理解为一条链（如图9，两个widgets组成的最小的链）</p> <p><img alt="图9 链" src=/assets/images/android/constraintlayout-chains.png></p> <p><center>图9 链</center></p> <p>&nbsp;</p> <p><font size=3><b>链头 (Chain heads)</b></font> </p> <p>链的第一个元素（也称之为链“头”）上的属性控制着整个链：</p> <p><img alt="图10 链头" src=/assets/images/android/constraintlayout-chains-head.png></p> <p><center>图10 链头</center></p> <p>水平链上最左边的widget就是链头；同理，竖直链上最上面的widget是链头。</p> <p>&nbsp;</p> <p><font size=3><b>链中的margin</b></font> </p> <p>If margins are specified on connections, they will be taken in account. In the case of spread chains, margins will be deducted from the allocated space.（这句实在是无法信达雅，大致意思就是说：链中的margin会被考虑在内。在spread模式下，先处理margin，剩下的空间交给widget处理）</p> <p>&nbsp;</p> <p><font size=3><b>链的样式</b></font> </p> <p>通过在链头上设置<code>layout_constraintHorizontal_chainStyle</code>或<code>layout_constraintVertical_chainStyle</code>属性，可以改变链的样式（默认为<code>CHAIN_SPREAD</code>）。</p> <ul> <li><code>CHAIN_SPREAD</code> - 元素将会展开，Flutter中MainAxisAlignment.spaceEvenly的效果（默认样式）</li> <li>权重链（Weighted chain） - 在<code>CHAIN_SPREAD</code>模式中，设置为<code>MATCH_CONSTRAINT</code>的widgets，将会平分剩下的空间</li> <li><code>CHAIN_SPREAD_INSIDE</code> - 和<code>CHAIN_SPREAD</code>类似，但链的两端不会展开，Flutter中MainAxisAlignment.spaceBetween的效果</li> <li><code>CHAIN_PACKED</code> - 链中的元素会挤在一起。bias属性会影响整体的位置。 <img alt="图11 链的样式" src=/assets/images/android/constraintlayout-chains-styles.png> <center>图11 链的样式</center></li> </ul> <p><strong>权重链</strong> </p> <p>链的默认行为是元素平分可用的空间。如果一个或多个元素使用了<code>MATCH_CONSTRAINT</code>，它们将会使用其他元素用剩的所有可用的空白空间（相互之间平等分配，整个行为就像LinearLayout那样）。<code>layout_constraintHorizontal_weight</code>和<code>layout_constraintVertical_weight</code>属性将会控制<code>MATCH_CONSTRAINT</code>元素怎样分配空间。例如，一条链中两个元素使用<code>MATCH_CONSTRAINT</code>，第一个元素权重为2，第二个元素权重为1，因此，第一个元素占用的空间会是第二个元素的两倍。</p> <p><strong>Margins与链（1.1版本中）</strong> </p> <p>在链中的元素上使用margin时，margin是相加的。<br> 例如，在水平链上，如果一个元素定义了10dp的右边距，而下一个元素定义了5dp的左边距，则这两个元素之间产生的边距为15dp。<br> 在计算链中用于定位items的剩余空间时，会同时考虑item及其边距。剩余空间中不包含边距。</p> <h2 id=8-virtual-helper-objects>8. 虚拟辅助对象（Virtual Helper objects）<a class=headerlink href=#8-virtual-helper-objects title="Permanent link">&para;</a></h2> <p>除了上面描述的功能之外，我们还可以使用ConstraintLayout中的特殊辅助对象来帮助我们进行布局。一般，辅助对象不会显示在设备上（因为它们都是<code>View.GONE</code>的），只用来辅助布局，且只适用于ConstraintLayout中。<br> 目前，<code>Guideline</code>对象允许我们创建相对于ConstraintLayout容器定位的水平和垂直辅助线。widgets可以约束在这些辅助线上。<br> 在1.1版本中，也增加了<code>Barrier</code>、<code>Group</code>、<code>Placeholder</code>三个辅助对象。</p> <p>&nbsp;</p> <p><font size=3><b>Guideline</b></font> </p> <p>Guideline可以是水平或者竖直的：</p> <ul> <li>竖直Guideline宽度为0，高度为<code>ConstraintLayout</code> parent的高度</li> <li>水平Guideline高度为0，宽度为<code>ConstraintLayout</code> parent的宽度</li> </ul> <p>Guideline的位置可以由下面三种方式决定：</p> <ul> <li>从layout的左边或上面开始指定一个固定的距离（dp值） - <code>layout_constraintGuide_begin</code></li> <li>从layout的右边或下面开始指定一个固定的距离（dp值） - <code>layout_constraintGuide_end</code></li> <li>指定layout的宽度或高度的百分比位置（0～1浮点数） - <code>layout_constraintGuide_percent</code></li> </ul> <p>&nbsp;</p> <p><font size=3><b>Barrier</b></font> </p> <p>Barrier接收多个widget的id作为参数，基于最极端的widget的指定的一侧创建一个虚拟的辅助线。</p> <p>Barrier的方向可以通过<code>barrierDirection</code>来设置，有如下可选值</p> <ul> <li><code>left</code></li> <li><code>start</code></li> <li><code>right</code></li> <li><code>end</code></li> <li><code>top</code></li> <li><code>bottom</code></li> </ul> <p>例如，这里有两个button，分别是<a class="magiclink magiclink-github magiclink-mention" href=https://github.com/id title="GitHub User: id">@id</a>/button1和<a class="magiclink magiclink-github magiclink-repository" href=https://github.com/id/button2 title="GitHub Repository: id/button2">id/button2</a>。<code>constraint_referenced_ids</code>将会引用它们，两个id之间用逗号区分。</p> <p><img alt src=/assets/images/android/constraintlayout-barrier-buttons.png></p> <div class=codehilite><pre><span></span><span class=nt>&lt;android.support.constraint.Barrier</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/barrier&quot;</span>
        <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>app:barrierDirection=</span><span class=s>&quot;start&quot;</span>
        <span class=na>app:constraint_referenced_ids=</span><span class=s>&quot;button1,button2&quot;</span> <span class=nt>/&gt;</span>
</pre></div> <p>Barrier的方向设置为了start，所以结果如下：</p> <p><img alt src=/assets/images/android/constraintlayout-barrier-start.png></p> <p>相反的，我们将Barrier的方向设置为end，结果如下：</p> <p><img alt src=/assets/images/android/constraintlayout-barrier-end.png></p> <p>如果widgets的尺寸变化了，Barrier将会根据设置的方向自动移动到最极端的widget上：</p> <p><img alt src=/assets/images/android/constraintlayout-barrier-adapt.png></p> <p>其他widget可以约束到Barrier上，而不是单独的widget。这样的话，我们的layout可以自动适配widget尺寸的变化（比如，对于同一个单词，不同语言下长度会不一样）。</p> <p>Barrier如果引用了GONE的widgets，默认行为会基于GONE后的坐标创建障碍。如果我们不想让Barrier将GONE的widgets考虑在内，我们可以将<code>barrierAllowsGoneWidgets</code>属性设置为false（默认为true）。</p> <p>&nbsp;</p> <p><font size=3><b>Group</b></font> </p> <p>Group的作用就是控制所有引用的widget的可见性。widget id之间还是用逗号分割：</p> <div class=codehilite><pre><span></span><span class=nt>&lt;android.support.constraint.Group</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/group&quot;</span>
        <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:visibility=</span><span class=s>&quot;visible&quot;</span>
        <span class=na>app:constraint_referenced_ids=</span><span class=s>&quot;button4,button9&quot;</span> <span class=nt>/&gt;</span>
</pre></div> <p>使用这种方式隐藏、显示一组widget是非常容易的，不需要程序性的维护这个集合。</p> <p>多个Group可以引用同一个widget，在这种情况下，xml定义的顺序会导致最后的可见性状态（最后定义的group最终会生效）。</p> <p>&nbsp;</p> <p><font size=3><b>Placeholder</b></font> </p> <p>Placeholder提供可一个能够定位在已存在对象上的可见对象。<br> 当另一个view的id设置到了placeholder上（通过<code>setContent()</code>方法），placeholder会变成content view。如果content view存在在屏幕上，那么它会从原来的位置gone。<br> content view的位置由布局中Placeholder的参数决定（Placeholder可以向其他view一样被约束），content view的其他属性由content view自己决定。</p> <h2 id=9-optimizer-11>9. Optimizer (1.1版本中)<a class=headerlink href=#9-optimizer-11 title="Permanent link">&para;</a></h2> <p>在1.1版本中，暴露了约束优化器。我们可以在<code>ConstraintLayout</code>上通过添加<code>app:layout_optimizationLevel</code>的方式，决定使用哪种优化。</p> <ul> <li><strong>none</strong> : 不使用任何优化</li> <li><strong>standard</strong> : 默认值。仅优化direct、barrier约束</li> <li><strong>direct</strong> : 优化direct约束</li> <li><strong>barrier</strong> : 优化barrier约束</li> <li><strong>chain</strong> : 优化chain约束（试验性）</li> <li><strong>dimensions</strong> : 优化尺寸测量（试验性）, 减少匹配约束元素的测量的次数</li> </ul> <p>该属性是一个掩码（mask），所以我们可以决定打开或关闭指定的优化。<br> 比如，<code>app:layout_optimizationLevel="direct|barrier|chain"</code>。</p> <h2 id=10-constraintset>10. ConstraintSet<a class=headerlink href=#10-constraintset title="Permanent link">&para;</a></h2> <p>ConstraintSet允许我们通过代码设置一系列约束，除此之外，还能对ConstraintLayout里面的控件做动画。</p> <p>首先，我们通过各种方式初始化好两个需要交替互换的<code>ConstraintSet</code>。这里两个<code>ConstraintSet</code>中只有一个<code>Group</code>显示与隐藏的区别。</p> <div class=codehilite><pre><span></span><span class=k>private</span> <span class=k>lateinit</span> <span class=k>var</span> <span class=py>debitCardSet</span><span class=p>:</span> <span class=n>ConstraintSet</span>
<span class=k>private</span> <span class=k>lateinit</span> <span class=k>var</span> <span class=py>creditCardSet</span><span class=p>:</span> <span class=n>ConstraintSet</span>

<span class=k>private</span> <span class=k>fun</span> <span class=nf>initView</span><span class=p>()</span> <span class=p>{</span>
    <span class=n>debitCardSet</span> <span class=p>=</span> <span class=n>ConstraintSet</span><span class=p>()</span>
    <span class=n>debitCardSet</span><span class=p>.</span><span class=n>clone</span><span class=p>(</span><span class=n>constraintLayout</span><span class=p>)</span>
    <span class=n>debitCardSet</span><span class=p>.</span><span class=n>setVisibility</span><span class=p>(</span><span class=n>R</span><span class=p>.</span><span class=n>id</span><span class=p>.</span><span class=n>groupCreditCard</span><span class=p>,</span> <span class=n>View</span><span class=p>.</span><span class=n>GONE</span><span class=p>)</span>
    <span class=n>creditCardSet</span> <span class=p>=</span> <span class=n>ConstraintSet</span><span class=p>()</span>
    <span class=n>creditCardSet</span><span class=p>.</span><span class=n>clone</span><span class=p>(</span><span class=n>constraintLayout</span><span class=p>)</span>
    <span class=n>creditCardSet</span><span class=p>.</span><span class=n>setVisibility</span><span class=p>(</span><span class=n>R</span><span class=p>.</span><span class=n>id</span><span class=p>.</span><span class=n>groupCreditCard</span><span class=p>,</span> <span class=n>View</span><span class=p>.</span><span class=n>VISIBLE</span><span class=p>)</span>
<span class=p>}</span>
</pre></div> <p>然后，在需要切换<code>Group</code>的显示与隐藏时，调用下面的方法：</p> <div class=codehilite><pre><span></span><span class=k>private</span> <span class=k>fun</span> <span class=nf>showCreditCard</span><span class=p>(</span><span class=n>showCreditCard</span><span class=p>:</span> <span class=n>Boolean</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>val</span> <span class=py>transition</span> <span class=p>=</span> <span class=n>AutoTransition</span><span class=p>()</span>
    <span class=n>transition</span><span class=p>.</span><span class=n>duration</span> <span class=p>=</span> <span class=m>200</span>
    <span class=n>TransitionManager</span><span class=p>.</span><span class=n>beginDelayedTransition</span><span class=p>(</span><span class=n>constraintLayout</span><span class=p>,</span> <span class=n>transition</span><span class=p>)</span>
    <span class=k>val</span> <span class=py>constraintSet</span> <span class=p>=</span> <span class=k>if</span> <span class=p>(</span><span class=n>showCreditCard</span><span class=p>)</span> <span class=n>creditCardSet</span> <span class=k>else</span> <span class=n>debitCardSet</span>
    <span class=n>constraintSet</span><span class=p>.</span><span class=n>applyTo</span><span class=p>(</span><span class=n>constraintLayout</span><span class=p>)</span>
<span class=p>}</span>
</pre></div> <p>显示效果如下：</p> <p><img alt src=/assets/images/android/constraintlayout-constraint-set.gif></p> <hr> <div class=md-source-date> <small> 最后更新: 2020年3月13日 </small> </div> <h2 id=__comments>评论</h2> <div id=disqus_thread></div> <script>
    var disqus_config = function () {
      this.page.url = "https://blog.yorek.xyz/about-me/android/other/constraintlayout/";
      this.page.identifier =
        "/android/other/constraintlayout/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//yorekliu.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../3rd-library/permissiondispatcher/ title=PermissionDispatcher源码解析 class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 上一页 </span> PermissionDispatcher源码解析 </span> </div> </a> <a href=../dagger2/ title=初学者的Dagger2教程 class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> 下一页 </span> 初学者的Dagger2教程 </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> &copy; 2020 Yorek </div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> </div> <div class=md-footer-social> <link rel=stylesheet href=../../../assets/fonts/font-awesome.css> <a href=https://github.com/YorekLiu class="md-footer-social__link fa fa-github"></a> <a href=lyytogether@gmail.com class="md-footer-social__link fa fa-email"></a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/application.808e90bb.js></script> <script src=../../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../../assets/javascripts/lunr/tinyseg.js></script> <script src=../../../assets/javascripts/lunr/lunr.ja.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>